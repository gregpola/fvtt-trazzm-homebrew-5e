{"name":"Light Sensitivity","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Light Sensitivity.</strong></em>","fullName":"Light Sensitivity."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.zwz5Igr2JJYD3nwo.Item.1a90fvd0zg61dpzi"},"scene-packer":{"hash":"8d03cc3789f8edc2244db836a6ecfb89f6d2100a","sourceId":"Item.gFZYrmQZuOidQsDn"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"effects":[{"label":"Light Sensitivity","icon":"icons/magic/nature/root-vine-thorned-fire-purple.webp","origin":"Item.gFZYrmQZuOidQsDn","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"6NVxGXbvf3R36IuM","changes":[{"key":"flags.midi-qol.disadvantage.attack.all","mode":0,"value":"1","priority":20},{"key":"flags.midi-qol.disadvantage.skill.prc","mode":0,"value":"1","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/magic/nature/root-vine-thorned-fire-purple.webp","system":{"description":{"value":"<p>While in bright light, the demon has disadvantage on attack rolls, as well as on Wisdom (Perception) checks that rely on sight.</p><p><em>*Foundry Note: turn the effect on in scenes that it should apply</em></p>","chat":"","unidentified":""},"source":"Monster Manual pg 64","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676572800792,"modifiedTime":1676572893409,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"00axVsEObJ5vcute"}
{"name":"Demon Staff","type":"weapon","flags":{"ddbimporter":{"dndbeyond":{},"effectsApplied":true},"monsterMunch":{"titleHTML":"<strong>Demon Staff. </strong>","fullName":"Demon Staff. "},"midi-qol":{"fumbleThreshold":null,"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.ano5fX4gmxAvYqxN.Item.bzwjqk2k6oirrz45"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.ano5fX4gmxAvYqxN.Item.bzwjqk2k6oirrz45","hash":"5edbf67d3ee29cbb4f5127f58aebd52b0573dc28"}},"effects":[{"label":"Demon Staff","icon":"icons/weapons/staves/staff-ornate-eye.webp","changes":[{"key":"flags.midi-qol.OverTime","mode":0,"value":"turn=end, saveAbility=wis, saveDC=19, label=Frightened","priority":20},{"key":"macro.CE","mode":0,"value":"Frightened","priority":20}],"duration":{"seconds":60,"startTime":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"transfer":false,"disabled":false,"flags":{"dae":{"transfer":false,"stackable":"none","selfTarget":false,"selfTargetAlways":false,"durationExpression":"","macroRepeat":"none","specialDuration":[]},"ddbimporter":{"disabled":false},"midi-qol":{"forceCEOff":true},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"_id":"yr28e6lhexrlepb3","origin":null,"tint":null}],"img":"icons/weapons/staves/staff-ornate-eye.webp","system":{"description":{"value":"<p><em><strong></strong>Melee Weapon Attack:</em> +10 to hit, reach 5 ft., one target. <em>Hit:</em> 7 (1d6 + 4) bludgeoning damage, or 8 (1d8 + 4) bludgeoning damage if used with two hands, plus 14 (4d6) psychic damage. The target must succeed on a DC 19 Wisdom saving throw or become frightened of the drow for 1 minute. The frightened target can repeat the saving throw at the end of each of its turns, ending the effect on itself on a success.</p>","chat":"","unidentified":""},"source":"Mordenkainen Presents: Monsters of the Multiverse pg 104","quantity":1,"weight":0,"price":{"value":0,"denomination":"gp"},"attunement":0,"equipped":true,"rarity":"","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"","units":"inst"},"cover":null,"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"dex","actionType":"mwak","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d6 + @mod","bludgeoning"],["4d6","psychic"]],"versatile":"1d8 + @mod"},"formula":"","save":{"ability":"wis","dc":19,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{"amm":false,"fin":false,"fir":false,"foc":false,"hvy":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":true,"ada":false,"mgc":false,"sil":false},"proficient":true},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676590429227,"modifiedTime":1676590429227,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"1fBWx5A5IaWkfiUa"}
{"name":"Animate Vines","type":"feat","img":"icons/magic/nature/root-vine-spiral-thorns-teal.webp","system":{"description":{"value":"<p>Up to four vines the kyton can see within 60 feet of it magically sprout thorns and animate under the kyton’s control.</p><p>Each animated vine is an object with AC 20, 20 hit points, resistance to piercing damage, and immunity to psychic and thunder damage. When the kyton uses multiattack on its turn, it can use each animated vine to make one additional thorn vine attack.</p><p>An animated vine can grapple one creature of its own but can’t make attacks while grappling. An animated vine reverts to its inanimate state if reduced to 0 hit points or if the kyton is incapacitated or dies.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"","units":"spec"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"sr","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"label":"Animate Vines","icon":"icons/magic/nature/root-vine-spiral-thorns-teal.webp","origin":"Item.3zxMMaoLuTtoQh4D","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"QXamm82Kk2b3G8Bx","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dfreds-convenient-effects":{"description":""},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["zeroHP"]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"flags":{"scene-packer":{"hash":"1d1e891b16fbd230eba50000107e9a812179cd00","sourceId":"Item.3zxMMaoLuTtoQh4D"},"core":{"sourceId":"Item.3zxMMaoLuTtoQh4D"},"itemacro":{"macro":{"name":"Animate Vines","type":"script","scope":"global","command":"/*\n\tUp to four vines the kyton can see within 60 feet of it magically sprout thorns and animate under the kyton’s control.\n\n\tEach animated vine is an object with AC 20, 20 hit points, resistance to piercing damage, and immunity to psychic and thunder damage. When the kyton uses multiattack on its turn, it can use each animated vine to make one additional thorn vine attack.\n\n\tAn animated vine can grapple one creature of its own but can’t make attacks while grappling. An animated vine reverts to its inanimate state if reduced to 0 hit points or if the kyton is incapacitated or dies.\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Animate Vines\";\nconst summonFlag = \"animated-vines\";\nconst summonId = \"0MsDEmI3rNoF8vvi\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\n\tif (args[0] === \"on\") {\n        if (!game.modules.get(\"warpgate\")?.active) ui.notifications.error(\"Please enable the Warp Gate module\");\n\t\t\n\t\tconst sourceItem = await fromUuid(lastArg.origin);\n\n\t\t// build the update data to match summoned traits\n\t\tconst summonName = `Animated Vines (${actor.name})`;\n\t\tlet updates = {\n\t\t\ttoken: {\n\t\t\t\t\"name\": summonName,\n\t\t\t\t\"disposition\": actorToken.disposition,\n\t\t\t\t\"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER,\n\t\t\t\t\"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS,\n\t\t\t\t\"bar1\": { attribute: \"attributes.hp\" },\n\t\t\t\t\"actorLink\": false,\n\t\t\t\t\"flags\": { \"midi-srd\": { \"Animated Vines\" : { \"ActorId\": actor.id } } }\n\t\t\t},\n\t\t\t\"name\": summonName\n\t\t};\n\t\t\n\t\tlet summonActor = game.actors.getName(summonName);\n\t\tif (!summonActor) {\n\t\t\t// Get from the compendium\n\t\t\tlet entity = await fromUuid(\"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.\" + summonId);\n\t\t\tif (!entity) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to find the actor`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// import the actor\n\t\t\tlet document = await entity.collection.importFromCompendium(game.packs.get(entity.pack), summonId, updates);\n\t\t\tif (!document) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to import from the compendium`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tawait warpgate.wait(500);\n\t\t\tsummonActor = game.actors.getName(summonName);\n\t\t}\n\t\t\n\t\t// Spawn the result\n\t\tconst maxRange = 60;\n\t\t\n\t\tfor (let i = 0; i < 4; i++) {\n\t\t\tlet position = await HomebrewMacros.warpgateCrosshairs(actorToken, maxRange, sourceItem, summonActor.prototypeToken);\n\t\t\t\n\t\t\tif (position) {\n\t\t\t\tlet options = {collision: true};\n\t\t\t\tconst spawned = await warpgate.spawnAt(position, summonName, updates, { controllingActor: actor }, options);\n\t\t\t\tif (!spawned || !spawned[0]) {\n\t\t\t\t\tui.notifications.error(`${optionName} - unable to spawn the vine`);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet summonedToken;\n\t\t\t\tfor (var i = 0; i < spawned.length; i++) {\n\t\t\t\t\tsummonedToken = canvas.tokens.get(spawned[i]);\n\t\t\t\t\tif (summonedToken) {\n\t\t\t\t\t\tawait summonedToken.toggleCombat();\n\t\t\t\t\t\tawait summonedToken.actor.rollInitiative();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t}\n\n\t\t// keep track of the spawned critters, so that they can be deleted after the spell expires\n\t\tawait actor.setFlag(\"midi-qol\", summonFlag, summonName);\n\t\t\n\t}\n\telse if (args[0] === \"off\") {\n\t\t// delete the summons\n\t\tconst summonName = actor.getFlag(\"midi-qol\", summonFlag);\n\t\tif (summonName) {\n\t\t\tawait actor.unsetFlag(\"midi-qol\", summonFlag);\n\t\t\t\n\t\t\tlet tokens = canvas.tokens.ownedTokens.filter(i => i.name === summonName);\n\t\t\tfor (let i = 0; i < tokens.length; i++) {\n\t\t\t\tawait warpgate.dismiss(tokens[i].id, game.canvas.scene.id);\n\t\t\t}\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1678550691275,"modifiedTime":1678554042428,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"5SdI0PW6hDC6EcC9"}
{"name":"Sunlight Sensitivity","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Sunlight Sensitivity.</strong></em>","fullName":"Sunlight Sensitivity."},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.CGc0Rgg1V1knUeQu.Item.tbuflz8o7o1nxxlq"},"scene-packer":{"hash":"b58ded551547d38a44417d79adf4f401963cef87","sourceId":"Item.tLSlduMnhb3sl4xC"}},"effects":[{"label":"Sunlight Sensitivity","icon":"icons/magic/nature/root-vine-thorned-fire-purple.webp","origin":"Item.tLSlduMnhb3sl4xC","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"6udZ1O5XtKNRl8hF","changes":[{"key":"flags.midi-qol.disadvantage.attack.all","mode":0,"value":"1","priority":20},{"key":"flags.midi-qol.disadvantage.skill.prc","mode":0,"value":"1","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/magic/nature/root-vine-thorned-fire-purple.webp","system":{"description":{"value":"<p>While in sunlight, the drow has disadvantage on attack rolls, as well as on Wisdom (Perception) checks that rely on sight.</p><p><em>*Foundry Note: turn the effect on in scenes that it should apply</em></p>","chat":"","unidentified":""},"source":"Basic Rules pg 307","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675816240023,"modifiedTime":1675816418833,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"5TkZtMTwreUqD3Be"}
{"name":"Shapechanger (Quasit)","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Shapechanger.</strong></em>","fullName":"Shapechanger."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.qWBgPJinjzUn0DWK.Item.mnl70w6sn6ty55f7"},"scene-packer":{"hash":"3838f8f53d7ccf0fad5ff4bd523e7602ab89de9f","sourceId":"Item.Q4ZwnMFEyjYGKbV9"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"name":"Shapechanger (Quasit)","type":"script","scope":"global","command":"const version = \"10.0.0\";\nconst optionName = \"Shapechanger (Quasit)\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\t\n\tif (args[0] === \"on\") {\n\t\t// ask which form\n\t\tlet dialog = new Promise((resolve, reject) => {\n\t\t\tnew Dialog({\n\t\t\t\t// localize this text\n\t\t\t\ttitle: `${optionName}`,\n\t\t\t\tcontent: `Which beast form?`,\n\t\t\t\tbuttons: {\n\t\t\t\t\tbat: {\n\t\t\t\t\t\ticon: '<img src = \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/npc-Bat.webp\" width=\"50\" height=\"50\"/>',\n\t\t\t\t\t\tlabel: \"<p>Bat</p>\",\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tresolve({name: \"Bat Form (Quasit)\", \n\t\t\t\t\t\t\timg: \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/npc-Bat.webp\",\n\t\t\t\t\t\t\twalk: 10,\n\t\t\t\t\t\t\tclimb: 0,\n\t\t\t\t\t\t\tfly: 40,\n\t\t\t\t\t\t\tswim: 0});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcentipede: {\n\t\t\t\t\t\ticon: '<img src = \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/giant-centipede.webp\" width=\"50\" height=\"50\"/>',\n\t\t\t\t\t\tlabel: \"<p>Centipede</p>\",\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tresolve({name: \"Centipede Form (Quasit)\", \n\t\t\t\t\t\t\timg: \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/giant-centipede.webp\",\n\t\t\t\t\t\t\twalk: 40,\n\t\t\t\t\t\t\tclimb: 40,\n\t\t\t\t\t\t\tfly: 0,\n\t\t\t\t\t\t\tswim: 0});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttoad: {\n\t\t\t\t\t\ticon: '<img src = \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/giant-toad.jpg\" width=\"50\" height=\"50\"/>',\n\t\t\t\t\t\tlabel: \"<p>Toad</p>\",\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tresolve({name: \"Toad Form (Quasit)\", \n\t\t\t\t\t\t\timg: \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/giant-toad.jpg\",\n\t\t\t\t\t\t\twalk: 40,\n\t\t\t\t\t\t\tclimb: 0,\n\t\t\t\t\t\t\tfly: 0,\n\t\t\t\t\t\t\tswim: 40});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcancel: {\n\t\t\t\t\t\tlabel: \"<p>Cancel</p>\",\n\t\t\t\t\t\tcallback: () => { \n\t\t\t\t\t\t\tresolve(null);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdefault: \"cancel\"\n\t\t\t}).render(true);\n\t\t});\n\n\t\tlet result = await dialog;\n\t\t\n\t\tif (result) {\n\t\t\tconst updates = {\n\t\t\t\ttoken : {\n\t\t\t\t\tname: result.name,\n\t\t\t\t\t\"texture.src\": result.img,\n\t\t\t\t},\n\t\t\t\tactor: {\n\t\t\t\t\tname: result.name,\n\t\t\t\t\tsystem: {\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\tmovement: {\n\t\t\t\t\t\t\t\twalk: result.walk,\n\t\t\t\t\t\t\t\tclimb: result.climb,\n\t\t\t\t\t\t\t\tfly: result.fly,\n\t\t\t\t\t\t\t\tswim: result.swim\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t/* Mutate the actor */\n\t\t\tawait warpgate.mutate(actorToken.document, updates);\n\t\t}\n\t}\n\telse if (args[0] === \"off\") {\n\t\tawait warpgate.revert(actorToken.document);\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[{"label":"Shapechanger","icon":"icons/creatures/magical/humanoid-giant-forest-blue.webp","origin":"Item.Q4ZwnMFEyjYGKbV9","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"5q4ZTdN1ZUxLHtL5","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["zeroHP"]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/creatures/magical/humanoid-giant-forest-blue.webp","system":{"description":{"value":"<p><span style=\"font-family:Signika, sans-serif\">The quasit can use its action to polymorph into a beast form that resembles a bat (speed 10 ft. fly 40 ft.), a centipede (40 ft., climb 40 ft.), or a toad (40 ft., swim 40 ft.), or back into its true form. Its statistics are the same in each form, except for the speed changes noted. Any equipment it is wearing or carrying isn't transformed. It reverts to its true form if it dies.</span></p>","chat":"","unidentified":""},"source":"Monster Manual pg 65","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1676565538717,"modifiedTime":1678500295162,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"6l8wfcdZ560ElyUv"}
{"name":"Summon Demon (Drow Mage)","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Summon Demon (1/Day).</strong>","fullName":"Summon Demon (1/Day)."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.JmyF9zSB8DY6oW5c.Item.c5qtmlumikdouyv5"},"scene-packer":{"sourceId":"Item.x0qS0vA8Ytwtu0PK","hash":"ee4d9c3d9c8e4236fdff3120a82dc1c267fe6f9c"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Demon (Drow Mage)","type":"script","scope":"global","command":"const version = \"10.0.0\";\nconst optionName = \"Drow Mage Summon Demon\";\nconst summonFlag = \"summon-demon\";\nconst summonOptionsFlag = \"summon-demon-options\";\nconst quasitId = \"FGjBwUlCzjRRt72o\";\nconst shadowDemonId = \"zwz5Igr2JJYD3nwo\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\n\tif (args[0].macroPass === \"preItemRoll\") {\n\t\t// Ask which summon option\n\t\tlet dialog = new Promise((resolve, reject) => {\n\t\t\tnew Dialog({\n\t\t\t\t// localize this text\n\t\t\t\ttitle: `${optionName}`,\n\t\t\t\tcontent: `Summon which type of demon?`,\n\t\t\t\tbuttons: {\n\t\t\t\t\tquasit: {\n\t\t\t\t\t\ticon: '<img src = \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/npc-Quasit.webp\" width=\"50\" height=\"50\"/>',\n\t\t\t\t\t\tlabel: \"<p>Quasit</p>\",\n\t\t\t\t\t\tcallback: async () => {\n\t\t\t\t\t\t\tawait actor.setFlag(\"midi-qol\", summonOptionsFlag, {name: \"Quasit\", summonId: quasitId});\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tshadow: {\n\t\t\t\t\t\ticon: '<img src = \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/npc-Shadow-Demon.webp\" width=\"50\" height=\"50\"/>',\n\t\t\t\t\t\tlabel: \"<p>Shadow Demon</p>\",\n\t\t\t\t\t\tcallback: async () => {\n\t\t\t\t\t\t\t// roll failure chance\n\t\t\t\t\t\t\tlet chanceRoll = await new Roll(`1d100`).evaluate({ async: true });\n\t\t\t\t\t\t\tawait game.dice3d?.showForRoll(chanceRoll);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (chanceRoll.total > 50) {\n\t\t\t\t\t\t\t\tChatMessage.create({\n\t\t\t\t\t\t\t\t\tcontent: `${actorToken.name}'s failed to summon a Shadow Demon!`,\n\t\t\t\t\t\t\t\t\tspeaker: ChatMessage.getSpeaker({ actor: actor })});\n\t\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tawait actor.setFlag(\"midi-qol\", summonOptionsFlag, {name: \"Shadow Demon\", summonId: shadowDemonId});\n\t\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcancel: {\n\t\t\t\t\t\tlabel: \"<p>Cancel</p>\",\n\t\t\t\t\t\tcallback: () => { \n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdefault: \"cancel\"\n\t\t\t}).render(true);\n\t\t});\n\n\t\tlet result = await dialog;\n\t\treturn result;\n\t\t\n\t}\n\telse if (args[0] === \"on\") {\n        if (!game.modules.get(\"warpgate\")?.active) ui.notifications.error(\"Please enable the Warp Gate module\");\n\t\t\n\t\tconst sourceItem = await fromUuid(lastArg.origin);\n\t\t\n\t\t// pull the summon info from the flag\n\t\tconst summonData = actor.getFlag(\"midi-qol\", summonOptionsFlag);\n\t\tif (!summonData) {\n\t\t\treturn ui.notifications.error(`${optionName}: no summon data`);\n\t\t}\n\t\tawait actor.unsetFlag(\"midi-qol\", summonOptionsFlag);\n\n\t\t// build the update data to match summoned traits\n\t\tconst summonName = `${summonData.name} (${actor.name})`;\n\t\tlet updates = {\n\t\t\ttoken: {\n\t\t\t\t\"name\": summonName,\n\t\t\t\t\"disposition\": actorToken.disposition,\n\t\t\t\t\"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER,\n\t\t\t\t\"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS,\n\t\t\t\t\"bar1\": { attribute: \"attributes.hp\" },\n\t\t\t\t\"actorLink\": false,\n\t\t\t\t\"flags\": { \"midi-srd\": { \"Summoned Demon\" : { \"ActorId\": actor.id } } }\n\t\t\t},\n\t\t\t\"name\": summonName\n\t\t};\n\t\t\n\t\tlet summonActor = game.actors.getName(summonName);\n\t\tif (!summonActor) {\n\t\t\t// Get from the compendium\n\t\t\tlet entity = await fromUuid(\"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.\" + summonData.summonId);\n\t\t\tif (!entity) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to find the actor`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// import the actor\n\t\t\tlet document = await entity.collection.importFromCompendium(game.packs.get(entity.pack), summonData.summonId, updates);\n\t\t\tif (!document) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to import from the compendium`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tawait warpgate.wait(500);\n\t\t\tsummonActor = game.actors.getName(summonName);\n\t\t}\n\t\t\n\t\t// Spawn the result\n\t\tconst maxRange = 60;\n\t\tlet position = await HomebrewMacros.warpgateCrosshairs(actorToken, maxRange, sourceItem, summonActor.prototypeToken);\n\t\tif (position) {\n\t\t\t// check for token collision\n\t\t\tconst newCenter = canvas.grid.getSnappedPosition(position.x - summonActor.prototypeToken.width / 2, position.y - summonActor.prototypeToken.height / 2, 1);\n\t\t\tif (HomebrewMacros.checkPosition(newCenter.x, newCenter.y)) {\n\t\t\t\tui.notifications.error(`${optionName} - can't teleport on top of another token`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst result = await warpgate.spawnAt(position, summonName, updates, { controllingActor: actor }, {});\n\t\t\tif (!result || !result[0]) {\n\t\t\t\tui.notifications.error(`${optionName} - Unable to spawn`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet summonedToken = canvas.tokens.get(result[0]);\n\t\t\tif (summonedToken) {\n\t\t\t\tawait anime(actorToken, summonedToken);\n\t\t\t\tawait actor.setFlag(\"midi-qol\", summonFlag, summonedToken.id);\n\t\t\t\tawait summonedToken.toggleCombat();\n\t\t\t\tawait summonedToken.actor.rollInitiative();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\tui.notifications.error(`${optionName} - invalid summon location`);\n\t\t\treturn false;\n\t\t}\n\t}\n\telse if (args[0] === \"off\") {\n\t\t// delete the summon\n\t\tconst lastSummon = actor.getFlag(\"midi-qol\", summonFlag);\n\t\tif (lastSummon) {\n\t\t\tawait actor.unsetFlag(\"midi-qol\", summonFlag);\n\t\t\tawait warpgate.dismiss(lastSummon, game.canvas.scene.id);\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}\n\nasync function anime(token, target) {\n    new Sequence()\n        .effect()\n        .file(\"jb2a.misty_step.01.red\")       \n        .atLocation(target)\n\t\t.scaleToObject(1)\n\t\t.play();\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[{"label":"Summon Demon","icon":"icons/magic/fire/explosion-embers-evade-silhouette.webp","origin":"Item.x0qS0vA8Ytwtu0PK","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"SpYCM9RzP6gHFtZw","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"core":{"sourceId":"Item.x0qS0vA8Ytwtu0PK.ActiveEffect.SpYCM9RzP6gHFtZw","statusId":""},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["zeroHP"]},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/magic/fire/explosion-embers-evade-silhouette.webp","system":{"description":{"value":"<p>The drow magically summons a @UUID[Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.FGjBwUlCzjRRt72o]{Quasit}, or attempts to summon a @UUID[Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.zwz5Igr2JJYD3nwo]{Shadow Demon} with a 50 percent chance of success. The summoned demon appears in an unoccupied space within 60 feet of its summoner, acts as an ally of its summoner, and can’t summon other demons. It remains for 10 minutes, until it or its summoner dies, or until its summoner dismisses it as an action.</p>","chat":"","unidentified":""},"source":"Mordenkainen Presents: Monsters of the Multiverse pg 102","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"10","units":"minute"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"day","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1676562833560,"modifiedTime":1677524599046,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"7A65b4QpupiVMTJz"}
{"name":"Spectral Dagger","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Spectral Dagger (Recharges after a Short or Long Rest).</strong>","fullName":"Spectral Dagger (Recharges after a Short or Long Rest)."},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"name":"Spectral Dagger","type":"script","scope":"global","command":"/*\n\tThe drow conjures a floating, spectral dagger within 60 feet of itself. The drow can make a melee spell attack (+10 to hit) against one creature within 5 feet of the dagger. On a hit, the target takes 9 (1d8 + 5) force damage.\n\n\tThe dagger lasts for 1 minute. As a bonus action on later turns, the drow can move the dagger up to 20 feet and repeat the attack against one creature within 5 feet of the dagger.\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Spectral Dagger\";\nconst actorName = \"Spectral Dagger\";\nconst summonFlag = \"spectral-dagger\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst caster = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\t\n\n\tif (args[0] === \"on\") {\n        if (!game.modules.get(\"warpgate\")?.active) ui.notifications.error(\"Please enable the Warp Gate module\")\n\n\t\tconst sourceItem = await fromUuid(lastArg.origin);\n\t\tlet spellStat = caster.system.attributes.spellcasting;\n\t\tif (spellStat === \"\") spellStat = \"cha\";\n\t\tconst spellcasting = caster.system.abilities[spellStat].mod;\n\n\t\tconst summonName = `${actorName} (${caster.name})`;\n\t\tconst updates = {\n            token: {\n\t\t\t\t\"name\": summonName,\n\t\t\t\t\"disposition\": actorToken.disposition,\n\t\t\t\t\"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER,\n\t\t\t\t\"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS,\n\t\t\t\t\"bar1\": { attribute: \"attributes.hp\" },\n\t\t\t\t\"actorLink\": false,\n\t\t\t\t\"flags\": { \"midi-srd\": { \"Spectral Dagger\": { \"ActorId\": caster.id } } }\n\t\t\t},\n\t\t\t\"name\": summonName\n\t\t};\n\n        let summonActor = game.actors.getName(summonName);\n        if (!summonActor) {\n\t\t\t// Get from the compendium\n\t\t\tconst summonId = \"xdWlBmKk1RRdlVy7\";\n\t\t\tlet entity = await fromUuid(\"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.\" + summonId);\n\t\t\tif (!entity) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to find the actor`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// import the actor\n\t\t\tlet document = await entity.collection.importFromCompendium(game.packs.get(entity.pack), summonId, updates);\n\t\t\tif (!document) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to import from the compendium`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tawait warpgate.wait(500);\n\t\t\tsummonActor = game.actors.getName(summonName);\n\t\t}\n\t\t\n\t\t// Spawn the result\n\t\tconst maxRange = 60;\n\t\tlet position = await HomebrewMacros.warpgateCrosshairs(actorToken, maxRange, sourceItem, summonActor.prototypeToken);\n\t\tif (position) {\n\t\t\t// check for token collision\n\t\t\tconst newCenter = canvas.grid.getSnappedPosition(position.x - summonActor.prototypeToken.width / 2, position.y - summonActor.prototypeToken.height / 2, 1);\n\t\t\tif (HomebrewMacros.checkPosition(newCenter.x, newCenter.y)) {\n\t\t\t\tui.notifications.error(`${optionName} - can't teleport on top of another token`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst result = await warpgate.spawnAt(position, summonName, updates, { controllingActor: caster }, {});\n\t\t\tif (!result || !result[0]) {\n\t\t\t\tui.notifications.error(`${optionName} - Unable to spawn`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet summonedToken = canvas.tokens.get(result[0]);\n\t\t\tif (summonedToken) {\n\t\t\t\tawait anime(actorToken, summonedToken);\n\t\t\t\tawait caster.setFlag(\"midi-qol\", summonFlag, summonedToken.id);\n\t\t\t\tawait summonedToken.toggleCombat();\n\t\t\t\tawait summonedToken.actor.rollInitiative();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\tui.notifications.error(`${optionName} - invalid summon location`);\n\t\t\treturn false;\n\t\t}\n\t}\n\telse if (args[0] === \"off\") {\n\t\t// delete the summon\n\t\tconst lastSummon = caster.getFlag(\"midi-qol\", summonFlag);\n\t\tif (lastSummon) {\n\t\t\tawait caster.unsetFlag(\"midi-qol\", summonFlag);\n\t\t\tawait warpgate.dismiss(lastSummon, game.canvas.scene.id);\n\t\t}\n\t}\n\t\n} catch (err)  {\n    console.error(`${optionName}: ${version}`, err);\n}\n\nasync function anime(token, target) {\n    new Sequence()\n        .effect()\n        .file(\"jb2a.misty_step.01.blue\")       \n        .atLocation(target)\n\t\t.scaleToObject(1)\n\t\t.play();\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.jkhW0YmxeRFAstqF.Item.s6pyjy8g4zl45mky"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.jkhW0YmxeRFAstqF.Item.s6pyjy8g4zl45mky","hash":"4151f890e5a695ab52c6cea684212c9a0bee86a7"}},"effects":[{"label":"Spectral Dagger","icon":"icons/weapons/daggers/dagger-crooked-ice-blue.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.jkhW0YmxeRFAstqF.Item.s6pyjy8g4zl45mky","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"ioJkfk7siO4Q2k3F","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/weapons/daggers/dagger-crooked-ice-blue.webp","system":{"description":{"value":"<p><em><strong></strong></em> The drow conjures a floating, spectral dagger within 60 feet of itself. The drow can make a melee spell attack (+10 to hit) against one creature within 5 feet of the dagger. On a hit, the target takes 9 (1d8 + 5) force damage.</p><p>The dagger lasts for 1 minute. As a bonus action on later turns, the drow can move the dagger up to 20 feet and repeat the attack against one creature within 5 feet of the dagger.</p>","chat":"","unidentified":""},"source":"Mordenkainen Presents: Monsters of the Multiverse pg 102","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":"1","units":"minute"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"sr","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d8 + 5","force"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676525452085,"modifiedTime":1676560689070,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"7s9HTcZIWRL7dTHu"}
{"name":"Pack Tactics","type":"feat","img":"icons/creatures/mammals/wolf-shadow-black.webp","effects":[{"_id":"mqgJESSKxcvjERpT","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Pack Tactics,preAttackRoll","priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/creatures/mammals/wolf-shadow-black.webp","label":"Pack Tactics","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-racial-traits.oh5opaaRHp5ByzEF","transfer":true,"flags":{"dae":{"selfTarget":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null}],"folder":null,"sort":0,"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"_id":null,"name":"Pack Tactics","type":"script","author":"5vlmE3uiS7OIQTEf","img":"icons/svg/dice-target.svg","scope":"global","command":"/*\n\tYou have advantage on an attack roll against a creature if at least one of your allies is within 5 feet of the creature and the ally isn’t incapacitated.\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Pack Tactics\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\t\n\tif (args[0].macroPass === \"preAttackRoll\") {\n\t\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\t\tif(!actorToken || lastArg.targets.length < 1)\n\t\t\treturn;\n\t\t\n\t\tconst targetToken = game.canvas.tokens.get(lastArg.targets[0].id);\n\t\tconst creatures = MidiQOL.findNearby(CONST.TOKEN_DISPOSITIONS.HOSTILE, targetToken, 5);\n\t\tconst validCreatures = arrayRemove(creatures, actorToken);\n\t\t\n\t\tif (validCreatures.length === 0 || validCreatures.filter(t=>t.actor.effects.find(i=>i.label === \"Incapacitated\")).length === validCreatures.length)\n\t\t\treturn;\n\t\telse\n\t\t\tsetProperty(lastArg.workflow, 'advantage', true);\n\t}\n\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}\n\nfunction arrayRemove(arr, value) {\n    return arr.filter(function(ele){\n        return ele != value;\n    });\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{},"ownership":{"default":0},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-racial-traits.oh5opaaRHp5ByzEF"},"scene-packer":{"hash":"9f9d15d7f109b01a71ad3efe149fdecc334b6881","sourceId":"Item.WY5mbmpjXSvHv6SV"}},"_id":"Epo1njlVH3Vl1dnR","system":{"description":{"value":"<p>You have advantage on an attack roll against a creature if at least one of your allies is within 5 feet of the creature and the ally isn’t incapacitated.</p>\n\n","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1673042301937,"modifiedTime":1677025326562,"lastModifiedBy":"5vlmE3uiS7OIQTEf"}}
{"name":"Sunlight Hypersensitivity","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em>Sunlight Hypersensitivity.</em>","fullName":"Sunlight Hypersensitivity."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.yaviJxEvv5eXVG7W.Item.fq4wgmd4ojkxaix6"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.yaviJxEvv5eXVG7W.Item.fq4wgmd4ojkxaix6","hash":"474535be03e6dfd96cd82a5d43c1f6c9fdc12261"}},"effects":[{"label":"Sunlight Hypersensitivity","icon":"icons/magic/light/explosion-star-large-orange.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.F4WvKfYySZWYMG4a","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"AODSuKrA4MDfBn7I","changes":[{"key":"flags.midi-qol.disadvantage.attack.all","mode":0,"value":"1","priority":20},{"key":"flags.midi-qol.disadvantage.ability.check.all","mode":0,"value":"1","priority":20},{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=start, damageRoll=20, damageType=radiant, label=Sunlight Hypersensitivity","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/magic/light/explosion-star-large-orange.webp","system":{"description":{"value":"<p><em></em> The vampire takes 20 radiant damage when it starts its turn in sunlight. While in sunlight, it has disadvantage on attack rolls and ability checks.</p>","chat":"","unidentified":""},"source":"Icewind Dale: Rime of the Frostmaiden pg 297","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677091075862,"modifiedTime":1677091245995,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"F4WvKfYySZWYMG4a"}
{"name":"Web (Spider Form Only; Recharge 5–6)","type":"feat","img":"icons/creatures/webs/web-spider-white-green.webp","system":{"description":{"value":"<p><em>Ranged Weapon Attack:</em> +8 to hit, range 30/60 ft., one target. <em>Hit:</em> The target is restrained by webbing. As an action, the restrained target can make a DC 15 Strength check, bursting the webbing on a success. The webbing can also be attacked and destroyed (AC 10; hp 5; vulnerability to fire damage; immunity to bludgeoning, poison, and psychic damage).</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":30,"long":60,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"dex","actionType":"rwak","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":5,"charged":true}},"effects":[{"label":"Webbed","icon":"icons/creatures/webs/web-spider-white-green.webp","origin":"Item.6xt0ORC9YugB8QDV","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"2zxqgXGWFK5bCROQ","changes":[{"key":"macro.CE","mode":0,"value":"Restrained","priority":20},{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"flags":{"scene-packer":{"hash":"955086d4deedc3ad6eab2c2ca8e48b18a0ca4150","sourceId":"Item.6xt0ORC9YugB8QDV"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"fumbleThreshold":null,"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Item.6xt0ORC9YugB8QDV"},"itemacro":{"macro":{"name":"Web (Spider Form Only; Recharge 5–6)","type":"script","scope":"global","command":"/*\n\tRanged Weapon Attack: +8 to hit, range 30/60 ft., one target. Hit: The target is restrained by webbing. As an action, the restrained target can make a DC 15 Strength check, bursting the webbing on a success. The webbing can also be attacked and destroyed (AC 10; hp 5; vulnerability to fire damage; immunity to bludgeoning, poison, and psychic damage).\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Webbed\";\nconst mutationFlag = \"drow-webbed\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\n\tif (args[0] === \"on\") {\n        if (!game.modules.get(\"warpgate\")?.active) {\n\t\t\tui.notifications.error(\"Please enable the Warp Gate module\");\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// add the break free option to the actors\n\t\tconst updates = {\n\t\t\tembedded: {\n\t\t\t\tItem: {\n\t\t\t\t\t\"Webbed - Break Free\": {\n\t\t\t\t\t\t\"type\": \"feat\",\n\t\t\t\t\t\t\"img\": \"icons/magic/control/buff-strength-muscle-damage.webp\",\n\t\t\t\t\t\t\"system\": {\n\t\t\t\t\t\t\t\"description\": {\n\t\t\t\t\t\t\t\t\"value\": \"As an action, the restrained target can make a DC 15 Strength check, bursting the webbing on a success.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"activation\": {\n\t\t\t\t\t\t\t\t\"type\": \"action\",\n\t\t\t\t\t\t\t\t\"cost\": 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"target\": {\n\t\t\t\t\t\t\t\t\"value\": null,\n\t\t\t\t\t\t\t\t\"type\": \"self\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"range\": {\n\t\t\t\t\t\t\t\t\"value\":null,\n\t\t\t\t\t\t\t\t\"long\":null,\n\t\t\t\t\t\t\t\t\"units\": \"self\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"duration\": {\n\t\t\t\t\t\t\t\t\"value\": null,\n\t\t\t\t\t\t\t\t\"units\": \"inst\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"cover\": null,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"flags\": {\n\t\t\t\t\t\t\t\"midi-qol\": {\n\t\t\t\t\t\t\t\t\"onUseMacroName\": \"ItemMacro\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"itemacro\": {\n\t\t\t\t\t\t\t\t\"macro\": {\n\t\t\t\t\t\t\t\t\t\"name\": \"Break Free\",\n\t\t\t\t\t\t\t\t\t\"type\": \"script\",\n\t\t\t\t\t\t\t\t\t\"scope\": \"global\",\n\t\t\t\t\t\t\t\t\t\"command\": \"const dc = 15;\\nconst roll = await token.actor.rollAbilityTest('str', {targetValue: dc});\\nif (roll.total >= dc) {\\nlet effect = token.actor.effects.find(ef => ef.label === 'Webbed');\\nif (effect) await effect.delete();\\nawait TokenMagic.deleteFilters(token);\\nawait warpgate.revert(token.document, 'Webbed - Break Free');\\nChatMessage.create({'content': `${token.name} breaks free of the webs!`});\\n}\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\t// add the break free feature\n\t\tawait warpgate.mutate(actorToken.document, updates, {}, { name: \"Webbed - Break Free\" });\n\t\t\n\t\tlet params = \n\t\t[{\n\t\t\tfilterType: \"web\",\n\t\t\tfilterId: \"simpleweb\",\n\t\t\ttime: 100,\n\t\t\tdiv1: 20,\n\t\t\tdiv2: 10,\n\t\t\tanimated :\n\t\t\t{\n\t\t\t  time : \n\t\t\t  { \n\t\t\t\tactive: true, \n\t\t\t\tspeed: 0.0005, \n\t\t\t\tanimType: \"move\" \n\t\t\t  }\n\t\t\t}\n\t\t}]\n\n\t\tawait TokenMagic.addUpdateFilters(actorToken, params);\t\t\n\t}\n\n} catch (err) {\n    console.error(`${optionName} ${version}`, err);\n}\n\n/*\n\t\t\t\t\t\t\t\t\t\"command\": \"const dc = 15;\\nconst roll = await token.actor.rollAbilityTest('str', {targetValue: dc});\\nif (roll.total >= dc) {\\nlet effect = token.actor.effects.find(ef => ef.label === 'Webbed');\\nif (effect) await effect.delete();\\nChatMessage.create({'content': `${token.name} breaks free of the webs!`});\\n}\"\n\n\t\t\t\t\t\t\t\t\t\"command\": \"const dc = 15;\\nconst e = event;\\nconst roll = await token.actor.rollAbilityTest('str', {targetValue: dc});\\nif (roll.total >= dc) {\\nawait warpgate.revert(token.document, 'Webbed - Break Free');\\nawait game.dfreds.effectInterface.removeEffect({effectName: 'Restrained', uuid: token.actor.uuid});\\nChatMessage.create({'content': `${token.name} breaks free of the webs!`});\\n}\"\n*/","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675870557730,"modifiedTime":1676472539337,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"GxyL8T4GXS9Xsj7i"}
{"name":"Levitate (self only)","type":"spell","img":"icons/magic/control/debuff-energy-snare-brown.webp","effects":[{"_id":"6BMAKrzsDsynMYBZ","flags":{"dae":{"selfTarget":false,"stackable":"noneName","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":null,"alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":0}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/control/debuff-energy-snare-brown.webp","label":"Levitate","transfer":false,"tint":null,"origin":null}],"flags":{"dynamiceffects":{"equipActive":true,"alwaysActive":false,"effects":[{"modSpecKey":"macro.execute","value":"Levitate @target","mode":"+","targetSpecific":false,"id":1,"itemId":"EDXeRSF3f6cl2O8L","active":true,"_targets":[]}]},"dae":{"activeEquipped":false,"alwaysActive":false},"itemacro":{"macro":{"data":{"name":"Levitate","type":"script","author":"Jwooh1sMQvmhHrUO","img":"icons/svg/dice-target.svg","scope":"global","command":"MidiMacros.levitate(args)","sort":0,"permission":{"default":0},"flags":{}},"name":"Levitate","type":"script","scope":"global","command":"/*\n\tOne creature or object of your choice that you can see within range rises vertically, up to 20 feet, and remains suspended there for the duration. The spell can levitate a target that weighs up to 500 pounds. An unwilling creature that succeeds on a Constitution saving throw is unaffected.\n\n\tThe target can move only by pushing or pulling against a fixed object or surface within reach (such as a wall or a ceiling), which allows it to move as if it were climbing. You can change the target’s altitude by up to 20 feet in either direction on your turn. If you are the target, you can move up or down as part of your move. Otherwise, you can use your action to move the target, which must remain within the spell’s range.\n\n\tWhen the spell ends, the target floats gently to the ground if it is still aloft.\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Levitate\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst targetToken = game.canvas.tokens.get(lastArg.tokenId);\n\n\tif (args[0] === \"on\") {\n\t\tawait targetToken.document.update({ \"elevation\": 20 });\n\t\tawait ChatMessage.create({ content: `${optionName} - ${targetToken.name} is levitated 20ft` });\n\t}\n\telse if (args[0] === \"off\") {\n\t\tawait targetToken.document.update({ \"elevation\": 0 });\n\t\tawait ChatMessage.create({ content: `${optionName} - ${targetToken.name} is returned to the ground` });\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midi-qol":{"onUseMacroName":"","effectActivation":false},"core":{"sourceId":"Compendium.Dynamic-Effects-SRD.DAE SRD Spells.VNkPZzkfmrVZvJ00"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.JhlGwtlPU1BFGYVs.Item.MBnDJWJDYcIwGcDe","hash":"7d9dbbb507eb479568c3d0f5aef61777be187b79"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"autoFailFriendly":false,"autoSaveFriendly":false,"offHandWeapon":false,"ignoreTotalCover":false},"walledtemplates":{"enabled":true}},"system":{"description":{"value":"<p>One creature or object of your choice that you can see within range rises vertically, up to 20 feet, and remains suspended there for the duration. The spell can levitate a target that weighs up to 500 pounds. An unwilling creature that succeeds on a Constitution saving throw is unaffected.</p>\n<p>The target can move only by pushing or pulling against a fixed object or surface within reach (such as a wall or a ceiling), which allows it to move as if it were climbing. You can change the target’s altitude by up to 20 feet in either direction on your turn. If you are the target, you can move up or down as part of your move. Otherwise, you can use your action to move the target, which must remain within the spell’s range.</p>\n<p>When the spell ends, the target floats gently to the ground if it is still aloft.</p>","chat":"","unidentified":""},"source":"PHB pg. 255","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"10","units":"minute"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"con","dc":null,"scaling":"spell"},"level":2,"school":"trs","components":{"vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"Either a small leather loop or a piece of golden wire bent into a cup shape with a long shank on one end","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"innate","prepared":false},"scaling":{"mode":"none","formula":""}},"ownership":{"default":0,"gSvPH9u5wzkE1oU1":3,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1673042305565,"modifiedTime":1676681572311,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"IDev8gRUlfQo6iOH"}
{"name":"Dark Devotion","type":"feat","img":"icons/magic/death/skeleton-worn-skull-tan.webp","system":{"description":{"value":"<p>You have advantage on saving throws against being @UUID[Compendium.dnd5e.rules.w7eitkpD7QQTB6j0.JournalEntryPage.zZaEBrKkr66OWJvD]{Charmed} or @UUID[Compendium.dnd5e.rules.w7eitkpD7QQTB6j0.JournalEntryPage.oreoyaFKnvZCrgij]{Frightened}.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":null,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[],"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"flags":{"scene-packer":{"hash":"934a12ecafdf98746f7f147468fbcb9df766e8d1","sourceId":"Item.bIbNm6EJbOHk2Jci"},"core":{"sourceId":"Item.bIbNm6EJbOHk2Jci"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677435471978,"modifiedTime":1677435595772,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"KHIcGAW7X5cynS9z"}
{"name":"Shapechanger","type":"feat","img":"icons/creatures/magical/humanoid-giant-forest-blue.webp","system":{"description":{"value":"<p>This is a generic Shapechanger feature. Modify the item macro to select the creature from the compendium that the actor changes into.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"label":"Shapechanger","icon":"icons/creatures/magical/humanoid-giant-forest-blue.webp","origin":"Item.08u4sqZIpioSMaa0","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"yAhMxSCA0uotGpsj","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dfreds-convenient-effects":{"description":""},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["zeroHP"]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"flags":{"scene-packer":{"hash":"ae5135bc5f6ae23a84aa1e24b8c9b88abace2ea2","sourceId":"Item.08u4sqZIpioSMaa0"},"itemacro":{"macro":{"name":"Shapechanger","type":"script","scope":"global","command":"const version = \"10.0.0\";\nconst optionName = \"Shapechanger\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\t\n\tif (args[0] === \"on\") {\n\t\tconst updates = {\n\t\t\ttoken : {\n\t\t\t\tname: \"Goblin\",\n\t\t\t\t\"texture.src\": \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/npc-Goblin.webp\",\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1,\n\t\t\t\tscale: 0.8\n\t\t\t},\n\t\t\tactor: {\n\t\t\t\tname: \"Goblin\",\n\t\t\t\tsystem: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tmovement: {\n\t\t\t\t\t\t\twalk: 30,\n\t\t\t\t\t\t\tclimb: 0,\n\t\t\t\t\t\t\tfly: 0,\n\t\t\t\t\t\t\tswim: 0\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"traits.size\" : \"sm\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t/* Mutate the actor */\n\t\tawait warpgate.mutate(actorToken.document, updates);\n\t}\n\telse if (args[0] === \"off\") {\n\t\tawait warpgate.revert(actorToken.document);\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.08u4sqZIpioSMaa0"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1678500175843,"modifiedTime":1678500845973,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"N66CQ0verspAhKZl"}
{"name":"Animate Trees","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Animate Trees (1/Day).</strong>","fullName":"Animate Trees (1/Day)."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.mDCARNREucJqntzC.Item.9u9i06r9bewxxdmv"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.mDCARNREucJqntzC.Item.9u9i06r9bewxxdmv","hash":"ac20a14c9b8ebbf11341f76bed084aaa03bc33b3"},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Animate Trees","type":"script","scope":"global","command":"/*\n\tThe treant magically animates one or two trees it can see within 60 feet of it. These trees have the same statistics as a treant, except they have Intelligence and Charisma scores of 1, they can't speak, and they have only the Slam action option. An animated tree acts as an ally of the treant. The tree remains animate for 1 day or until it dies; until the treant dies or is more than 120 feet from the tree; or until the treant takes a bonus action to turn it back into an inanimate tree. The tree then takes root if possible.\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Animate Trees\";\nconst summonFlag = \"animated-trees\";\nconst summonId = \"dvQ8Wpl9C416Adnq\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\n\tif (args[0] === \"on\") {\n        if (!game.modules.get(\"warpgate\")?.active) ui.notifications.error(\"Please enable the Warp Gate module\");\n\t\t\n\t\tconst sourceItem = await fromUuid(lastArg.origin);\n\n\t\t// build the update data to match summoned traits\n\t\tconst summonName = `Animated Tree (${actor.name})`;\n\t\tlet updates = {\n\t\t\ttoken: {\n\t\t\t\t\"name\": summonName,\n\t\t\t\t\"disposition\": actorToken.disposition,\n\t\t\t\t\"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER,\n\t\t\t\t\"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS,\n\t\t\t\t\"bar1\": { attribute: \"attributes.hp\" },\n\t\t\t\t\"actorLink\": false,\n\t\t\t\t\"flags\": { \"midi-srd\": { \"Animated Tree\" : { \"ActorId\": actor.id } } }\n\t\t\t},\n\t\t\t\"name\": summonName\n\t\t};\n\t\t\n\t\tlet summonActor = game.actors.getName(summonName);\n\t\tif (!summonActor) {\n\t\t\t// Get from the compendium\n\t\t\tlet entity = await fromUuid(\"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.\" + summonId);\n\t\t\tif (!entity) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to find the actor`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// import the actor\n\t\t\tlet document = await entity.collection.importFromCompendium(game.packs.get(entity.pack), summonId, updates);\n\t\t\tif (!document) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to import from the compendium`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tawait warpgate.wait(500);\n\t\t\tsummonActor = game.actors.getName(summonName);\n\t\t}\n\t\t\n\t\t// Spawn the result\n\t\tconst maxRange = 60;\n\t\tlet summonError = false;\n\t\tlet position = await HomebrewMacros.warpgateCrosshairs(actorToken, maxRange, sourceItem, summonActor.prototypeToken);\n\t\tif (position) {\n\t\t\tlet options = {duplicates: 2, collision: true};\n\t\t\tconst spawned = await warpgate.spawnAt(position, summonName, updates, { controllingActor: actor }, options);\n\t\t\tif (!spawned || !spawned[0]) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to spawn the trees`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// keep track of the spawned critters, so that they can be deleted after the spell expires\n\t\t\tawait actor.setFlag(\"midi-qol\", summonFlag, summonName);\n\t\t\t\n\t\t\tlet summonedToken;\n\t\t\tfor (var i = 0; i < spawned.length; i++) {\n\t\t\t\tsummonedToken = canvas.tokens.get(spawned[i]);\n\t\t\t\tif (summonedToken) {\n\t\t\t\t\tawait summonedToken.toggleCombat();\n\t\t\t\t\tawait summonedToken.actor.rollInitiative();\n\t\t\t\t}\n\t\t\t}\n\t\t\t/*\n\t\t\tif (summonedToken) {\n\t\t\t\tawait summonedToken.actor.rollInitiative();\n\t\t\t}\n\t\t\t*/\n\t\t}\n\t\telse {\n\t\t\tui.notifications.error(`${optionName} - invalid summon location`);\n\t\t}\n\t}\n\telse if (args[0] === \"off\") {\n\t\t// delete the summons\n\t\tconst summonName = actor.getFlag(\"midi-qol\", summonFlag);\n\t\tif (summonName) {\n\t\t\tawait actor.unsetFlag(\"midi-qol\", summonFlag);\n\t\t\t\n\t\t\tlet tokens = canvas.tokens.ownedTokens.filter(i => i.name === summonName);\n\t\t\tfor (let i = 0; i < tokens.length; i++) {\n\t\t\t\tawait warpgate.dismiss(tokens[i].id, game.canvas.scene.id);\n\t\t\t}\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[{"label":"Animate Trees","icon":"icons/magic/nature/tree-animated-squint.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.PuQGK5J1In4aX5vJ","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"6qbQDmBezkzMG8D2","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/magic/nature/tree-animated-squint.webp","system":{"description":{"value":"<p><em><strong></strong></em> The treant magically animates one or two trees it can see within 60 feet of it. These trees have the same statistics as a treant, except they have Intelligence and Charisma scores of 1, they can't speak, and they have only the Slam action option. An animated tree acts as an ally of the treant. The tree remains animate for 1 day or until it dies; until the treant dies or is more than 120 feet from the tree; or until the treant takes a bonus action to turn it back into an inanimate tree. The tree then takes root if possible.</p>","chat":"","unidentified":""},"source":"Basic Rules pg 351","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"1","units":"day"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"day","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677524515118,"modifiedTime":1677527842878,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"PuQGK5J1In4aX5vJ"}
{"name":"Summon Demon (Priestess of Lolth)","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Summon Demon (1/Day).</strong>","fullName":"Summon Demon (1/Day)."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.JmyF9zSB8DY6oW5c.Item.c5qtmlumikdouyv5"},"scene-packer":{"sourceId":"Item.f5VRfZK9iVJ9E3mt","hash":"0f51b2bc7ec454f95aa4ef2d5a813c188748f35c"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Demon (Priestess of Lolth)","type":"script","scope":"global","command":"const version = \"10.0.0\";\nconst optionName = \"Summon Demon\";\nconst summonFlag = \"summon-demon\";\nconst summonId = \"qWBgPJinjzUn0DWK\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\n\tif (args[0].macroPass === \"preItemRoll\") {\n\t\t// roll failure chance\n\t\tlet chanceRoll = await new Roll(`1d100`).evaluate({ async: true });\n\t\tawait game.dice3d?.showForRoll(chanceRoll);\n\t\t\n\t\tif (chanceRoll.total > 30) {\n\t\t\tconst damageRoll = await new Roll(`1d10`).evaluate({ async: true });\n\t\t\tawait game.dice3d?.showForRoll(damageRoll);\n\t\t\tconst damageWorkflow = await new MidiQOL.DamageOnlyWorkflow(actor, actorToken, damageRoll.total, \"psychic\", [actorToken], damageRoll, \n\t\t\t{ flavor: `${optionName} failure damage`, itemData: lastArg.itemData, itemCardId: \"new\" });\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\telse if (args[0] === \"on\") {\n        if (!game.modules.get(\"warpgate\")?.active) ui.notifications.error(\"Please enable the Warp Gate module\");\n\t\t\n\t\tconst sourceItem = await fromUuid(lastArg.origin);\n\n\t\t// build the update data to match summoned traits\n\t\tconst summonName = `Yochlol (${actor.name})`;\n\t\tlet updates = {\n\t\t\ttoken: {\n\t\t\t\t\"name\": summonName,\n\t\t\t\t\"disposition\": actorToken.disposition,\n\t\t\t\t\"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER,\n\t\t\t\t\"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS,\n\t\t\t\t\"bar1\": { attribute: \"attributes.hp\" },\n\t\t\t\t\"actorLink\": false,\n\t\t\t\t\"flags\": { \"midi-srd\": { \"Summoned Demon\" : { \"ActorId\": actor.id } } }\n\t\t\t},\n\t\t\t\"name\": summonName\n\t\t};\n\t\t\n\t\tlet summonActor = game.actors.getName(summonName);\n\t\tif (!summonActor) {\n\t\t\t// Get from the compendium\n\t\t\tlet entity = await fromUuid(\"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.\" + summonId);\n\t\t\tif (!entity) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to find the actor`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// import the actor\n\t\t\tlet document = await entity.collection.importFromCompendium(game.packs.get(entity.pack), summonId, updates);\n\t\t\tif (!document) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to import from the compendium`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tawait warpgate.wait(500);\n\t\t\tsummonActor = game.actors.getName(summonName);\n\t\t}\n\t\t\n\t\t// Spawn the result\n\t\tconst maxRange = 60;\n\t\tlet position = await HomebrewMacros.warpgateCrosshairs(actorToken, maxRange, sourceItem, summonActor.prototypeToken);\n\t\tif (position) {\n\t\t\t// check for token collision\n\t\t\tconst newCenter = canvas.grid.getSnappedPosition(position.x - summonActor.prototypeToken.width / 2, position.y - summonActor.prototypeToken.height / 2, 1);\n\t\t\tif (HomebrewMacros.checkPosition(newCenter.x, newCenter.y)) {\n\t\t\t\tui.notifications.error(`${optionName} - can't teleport on top of another token`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst result = await warpgate.spawnAt(position, summonName, updates, { controllingActor: actor }, {});\n\t\t\tif (!result || !result[0]) {\n\t\t\t\tui.notifications.error(`${optionName} - Unable to spawn`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet summonedToken = canvas.tokens.get(result[0]);\n\t\t\tif (summonedToken) {\n\t\t\t\tawait anime(actorToken, summonedToken);\n\t\t\t\tawait actor.setFlag(\"midi-qol\", summonFlag, summonedToken.id);\n\t\t\t\tawait summonedToken.toggleCombat();\n\t\t\t\tawait summonedToken.actor.rollInitiative();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\tui.notifications.error(`${optionName} - invalid summon location`);\n\t\t\treturn false;\n\t\t}\n\t}\n\telse if (args[0] === \"off\") {\n\t\t// delete the summon\n\t\tconst lastSummon = actor.getFlag(\"midi-qol\", summonFlag);\n\t\tif (lastSummon) {\n\t\t\tawait actor.unsetFlag(\"midi-qol\", summonFlag);\n\t\t\tawait warpgate.dismiss(lastSummon, game.canvas.scene.id);\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}\n\nasync function anime(token, target) {\n    new Sequence()\n        .effect()\n        .file(\"jb2a.misty_step.01.red\")       \n        .atLocation(target)\n\t\t.scaleToObject(1)\n\t\t.play();\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[{"label":"Summon Demon (Priestess of Lolth)","icon":"icons/magic/fire/explosion-embers-evade-silhouette.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.PyInLvacB8yt0YLg","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"hPTio3JKgE7xqqIJ","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["zeroHP"]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/magic/fire/explosion-embers-evade-silhouette.webp","system":{"description":{"value":"<p>The drow attempts to magically summon a @UUID[Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.qWBgPJinjzUn0DWK]{Yochlol}, with a 30 percent chance of success. If the attempt fails, the drow takes 5 (1d10) psychic damage. Otherwise, the summoned demon appears in an unoccupied space within 60 feet of its summoner, acts as an ally of its summoner, and can’t summon other demons. It remains for 10 minutes, until it or its summoner dies, or until its summoner dismisses it as an action.</p>","chat":"","unidentified":""},"source":"Mordenkainen Presents: Monsters of the Multiverse pg 102","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"10","units":"minute"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"day","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676562833560,"modifiedTime":1676681453951,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"PyInLvacB8yt0YLg"}
{"name":"Light Vulnerability","type":"feat","img":"icons/magic/light/explosion-star-glow-blue-purple.webp","system":{"description":{"value":"<p>Dark creepers are @UUID[Compendium.dnd5e.rules.w7eitkpD7QQTB6j0.JournalEntryPage.0b8N4FymGGfbZGpJ]{Blinded} in sunlight and have disadvantage on attack rolls and Wisdom (Perception) checks based on sight while in areas of bright light.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":null,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"label":"Light Vulnerability - Sunlight","icon":"icons/magic/light/explosion-star-glow-blue-purple.webp","origin":"Item.kYGNRUQoZk26SvSZ","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"Hd2qWhuD8jtzz8u3","changes":[{"key":"macro.CE","mode":0,"value":"Blinded","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}},{"label":"Light Vulnerability - Bright Light","icon":"icons/magic/light/explosion-star-glow-blue-purple.webp","origin":"Item.kYGNRUQoZk26SvSZ","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"BYILDf1kSytWpHis","changes":[{"key":"flags.midi-qol.disadvantage.attack.all","mode":0,"value":"1","priority":20},{"key":"flags.midi-qol.disadvantage.skill.prc","mode":0,"value":"1","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"flags":{"scene-packer":{"hash":"b7b7066c7c872a4fb9d8aba42896cf81c9d4107e","sourceId":"Item.kYGNRUQoZk26SvSZ"},"core":{"sourceId":"Item.kYGNRUQoZk26SvSZ"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677199001382,"modifiedTime":1677199179951,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"Q6WMDYWo1rKf0qwP"}
{"name":"Light Emanation","type":"feat","img":"icons/magic/light/explosion-star-glow-yellow.webp","system":{"description":{"value":"<p>If you are within 60 feet of it, you can speak its command word and cause it to emanate the light or daylight spell.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"label":"Light Emanation","icon":"icons/magic/light/explosion-star-glow-yellow.webp","origin":"Item.LKy1rDDA4Bbapq0P","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"tv5PBm6k6gzPGJSn","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"flags":{"scene-packer":{"hash":"79768ab97aeae327b63e8d661b563c83d1c60b22","sourceId":"Item.LKy1rDDA4Bbapq0P"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Light Emanation","type":"script","scope":"global","command":"const version = \"10.0.0\";\nconst optionName = \"Driftglobe Light Emanation\";\nconst lightingFlagName = \"driftglobe-light\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tlet actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tlet actorToken = canvas.tokens.get(lastArg.tokenId);\n\t\n\tif (args[0] === \"on\") {\n\t\t// get and stash the current data\n\t\tvar tokenLighting = actorToken.document.light;\n\t\tDAE.setFlag(actor, lightingFlagName, {\n\t\t\tname : optionName,\n\t\t\tlightDim: tokenLighting.dim,\n\t\t\tlightBright: tokenLighting.bright,\n\t\t\tlightAngle: tokenLighting.angle,\n\t\t\tlightAlpha: tokenLighting.alpha,\n\t\t\tlightColor: tokenLighting.color,\n\t\t\tlightAnimationIntensity: tokenLighting.animation.intensity,\n\t\t\tlightAnimationSpeed: tokenLighting.animation.speed,\n\t\t\tlightAnimationType: tokenLighting.animation.type\n\t\t});\n\n\t\t// set the token lighting\n\t\tactorToken.document.update({\n\t\t\t\"light.dim\": 40, \n\t\t\t\"light.bright\": 20, \n\t\t\t\"light.angle\": 360, \n\t\t\t\"light.alpha\": 0.25,\n\t\t\t\"light.color\": \"#ffffff\",\t\t\t\n\t\t\t\"light.animation\": {\n\t\t\t\t\"type\": \"pulse\",\n\t\t\t\t\"speed\": 3,\n\t\t\t\t\"intensity\": 1\n\t\t\t}\n\t\t});\n\t\t\n\t}\n\telse if (args[0] === \"off\") {\n\t\t// reset the token lighting\n\t\tlet flag = DAE.getFlag(actor, lightingFlagName);\n\t\tif (flag) {\n\t\t\tactorToken.document.update({\n\t\t\t\t\"light.dim\": flag.lightDim, \n\t\t\t\t\"light.bright\": flag.lightBright, \n\t\t\t\t\"light.angle\": flag.lightAngle, \n\t\t\t\t\"light.alpha\": flag.lightAlpha,\n\t\t\t\t\"light.color\": flag.lightColor,\t\t\t\n\t\t\t\t\"light.animation\": {\n\t\t\t\t\t\"type\": flag.lightAnimationType,\n\t\t\t\t\t\"speed\": flag.lightAnimationSpeed,\n\t\t\t\t\t\"intensity\": flag.lightAnimationIntensity\n\t\t\t\t}\t\t\t\n\t\t\t});\n\t\t\tDAE.unsetFlag(actor, lightingFlagName);\n\t\t}\n\t}\n\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.LKy1rDDA4Bbapq0P"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675130048020,"modifiedTime":1675131404447,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"R4sBWyYE0lZptg1S"}
{"name":"Shapechanger (Yochlol)","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Shapechanger.</strong></em>","fullName":"Shapechanger."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.qWBgPJinjzUn0DWK.Item.mnl70w6sn6ty55f7"},"scene-packer":{"hash":"e18f406d8c962bb333026dec35e1504228c51bf1","sourceId":"Item.TGQT91q5Nn9tlEKR"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"name":"Shapechanger (Yochlol)","type":"script","scope":"global","command":"const version = \"10.0.0\";\nconst optionName = \"Shapechanger (Yochlol)\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\t\n\tif (args[0] === \"on\") {\n\t\t// ask which form\n\t\tlet dialog = new Promise((resolve, reject) => {\n\t\t\tnew Dialog({\n\t\t\t\t// localize this text\n\t\t\t\ttitle: `${optionName}`,\n\t\t\t\tcontent: `Which form?`,\n\t\t\t\tbuttons: {\n\t\t\t\t\tdrow: {\n\t\t\t\t\t\ticon: '<img src = \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/npc-Drow.webp\" width=\"50\" height=\"50\"/>',\n\t\t\t\t\t\tlabel: \"<p>Female Drow</p>\",\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tresolve({name: \"Female Drow\", \n\t\t\t\t\t\t\timg: \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/npc-Drow.webp\"});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tspider: {\n\t\t\t\t\t\ticon: '<img src = \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/giant-spider.webp\" width=\"50\" height=\"50\"/>',\n\t\t\t\t\t\tlabel: \"<p>Giant Spider</p>\",\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tresolve({name: \"Giant Spider\", \n\t\t\t\t\t\t\timg: \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/giant-spider.webp\"});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcancel: {\n\t\t\t\t\t\tlabel: \"<p>Cancel</p>\",\n\t\t\t\t\t\tcallback: () => { \n\t\t\t\t\t\t\tresolve(null);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdefault: \"cancel\"\n\t\t\t}).render(true);\n\t\t});\n\n\t\tlet result = await dialog;\n\t\t\n\t\tif (result) {\n\t\t\tconst updates = {\n\t\t\t\ttoken : {\n\t\t\t\t\tname: result.name,\n\t\t\t\t\t\"texture.src\": result.img,\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t/* Mutate the actor */\n\t\t\tawait warpgate.mutate(actorToken.document, updates);\n\t\t}\n\t}\n\telse if (args[0] === \"off\") {\n\t\tawait warpgate.revert(actorToken.document);\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[{"label":"Shapechanger","icon":"icons/creatures/magical/humanoid-giant-forest-blue.webp","origin":"Item.TGQT91q5Nn9tlEKR","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"Is0wxSI0ExrHx4rp","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/creatures/magical/humanoid-giant-forest-blue.webp","system":{"description":{"value":"<p><em><strong></strong></em> The yochlol can use its action to polymorph into a form that resembles a female drow or giant spider, or back into its true form. Its statistics are the same in each form. Any equipment it is wearing or carrying isn’t transformed. It reverts to its true form if it dies.</p>","chat":"","unidentified":""},"source":"Monster Manual pg 65","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676565538717,"modifiedTime":1676565987926,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"RYXbRAdig0X2wc5Y"}
{"name":"Pure Spite","type":"feat","img":"icons/skills/targeting/crosshair-scope-sniper-green.webp","system":{"description":{"value":"<p>When the matron’s hit points are reduced below half of its maximum and has either the grappled, poisoned, or prone conditions due to the actions of an enemy that has not yet been vanquished, the matron may treat any die roll of 1 or 2 as a 3 when determining damage from spells or weapon attacks made against that enemy. This immediately ends if the enemy is brought to 0 HP or if the condition ends.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":null,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"label":"Pure Spite","icon":"icons/skills/targeting/crosshair-scope-sniper-green.webp","origin":"Item.RE5mGH6fkweWZxWK","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"jST7KTppIXJwoj44","changes":[{"key":"flags.midi-qol.onUseMacroName","mode":0,"value":"ItemMacro.Pure Spite,postDamageRoll","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"flags":{"scene-packer":{"hash":"29de381c367c4cead55c123f357670f176e77b83","sourceId":"Item.RE5mGH6fkweWZxWK"},"core":{"sourceId":"Item.RE5mGH6fkweWZxWK"},"itemacro":{"macro":{"name":"Pure Spite","type":"script","scope":"global","command":"/*\n\tWhen the matron’s hit points are reduced below half of its maximum and has either the grappled, poisoned, or prone conditions due to the actions of an enemy that has not yet been vanquished, the matron may treat any die roll of 1 or 2 as a 3 when determining damage from spells or weapon attacks made against that enemy. This immediately ends if the enemy is brought to 0 HP or if the condition ends.\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Pure Spite\";\n\ntry {\n\tif (args[0].macroPass === \"postDamageRoll\") {\n\t\tconst lastArg = args[args.length - 1];\n\t\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\n\t\t// Must be an attack\n\t\tif (![\"mwak\", \"rwak\", \"msak\", \"rsak\"].includes(lastArg.itemData.system.actionType))\n\t\t\treturn {};\n\t\t\n\t\t// Must be below half hit points\n\t\tconst hpValue = actor.system.attributes.hp.value;\n\t\tconst hpMax = actor.system.attributes.hp.max;\n\t\tif (hpValue >= (hpMax / 2))\n\t\t\treturn {};\n\n\t\t// Must be grappled, poisoned or prone\n\t\tlet hasCondition = false;\n\t\tif (actor.effects.find(ef => ef.label === \"Grappled\"))\n\t\t\thasCondition = true;\n\t\tif (actor.effects.find(ef => ef.label === \"Poisoned\"))\n\t\t\thasCondition = true;\n\t\tif (actor.effects.find(ef => ef.label === \"Restrained\"))\n\t\t\thasCondition = true;\n\t\t\n\t\tif (hasCondition) {\n\t\t\tfor (let i = 0; i < lastArg.workflow.damageRoll.terms.length; i++) {\n\t\t\t\tif (lastArg.workflow.damageRoll.terms[i] instanceof Die) {\n\t\t\t\t\tfor (let r of lastArg.workflow.damageRoll.terms[i].results) {\n\t\t\t\t\t\tif (r.result === 1 || r.result === 2) {\n\t\t\t\t\t\t\tr.result = 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677435797673,"modifiedTime":1677438167666,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"SsWiAMUJvlQ7odd9"}
{"name":"Death Throes","type":"feat","img":"icons/magic/death/undead-ghosts-trio-blue.webp","system":{"description":{"value":"<p>On their death, dark folk return to the endless flowing darkness from whence they came. Their form appears when evil-hearted determination coalesces from the cold, black depths of nihilism, and their demise shatters the bonds that held this negative energy together.</p><p>When the dark folk dies, it explodes into a flash of blinding darkness in a 20- foot radius. The darkness lingers for 1 minute.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":"1","units":"minute"},"cover":null,"target":{"value":20,"width":null,"units":"ft","type":"radius"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"label":"Death Throes","icon":"icons/magic/death/undead-ghosts-trio-blue.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.Tcjkt0bk7YQ0JpSm","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"3XCeBfh8XH8zOrM7","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"flags":{"scene-packer":{"hash":"5f0c61810dec3b6ef848e35e2ad08c4973bf0c3a","sourceId":"Item.yUYhWa82vegSmoXN"},"core":{"sourceId":"Item.yUYhWa82vegSmoXN"},"autoanimations":{"id":"936469df-ca23-446f-94a7-d6f15e87760e","label":"Death Throes","macro":{"enable":false,"playWhen":"0"},"menu":"templatefx","primary":{"video":{"dbSection":"templatefx","menuType":"circle","animation":"darkness","variant":"01","color":"black","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"contrast":0,"delay":0,"elevation":1000,"isMasked":false,"isWait":false,"occlusionAlpha":1,"occlusionMode":"2","opacity":1,"persistent":true,"persistType":"overheadtile","playbackRate":1,"removeTemplate":true,"repeat":1,"repeatDelay":250,"rotate":0,"saturate":0,"scale":"1.2","tint":false,"tintColor":"#FFFFFF","zIndex":1}},"secondary":{"enable":false,"video":{"dbSection":"static","menuType":"spell","animation":"curewounds","variant":"01","color":"blue","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"addTokenWidth":false,"anchor":"0.5","contrast":0,"delay":0,"elevation":1000,"fadeIn":250,"fadeOut":500,"isMasked":false,"isRadius":true,"isWait":false,"opacity":1,"repeat":1,"repeatDelay":250,"saturate":0,"size":1.5,"tint":false,"tintColor":"#FFFFFF","zIndex":1}},"soundOnly":{"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75}},"source":{"enable":false,"video":{"dbSection":"static","menuType":"spell","animation":"curewounds","variant":"01","color":"blue","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"addTokenWidth":false,"anchor":"0.5","contrast":0,"delay":0,"elevation":1000,"fadeIn":250,"fadeOut":500,"isMasked":false,"isRadius":false,"isWait":true,"opacity":1,"repeat":1,"repeatDelay":250,"saturate":0,"size":1,"tint":false,"tintColor":"#FFFFFF","zIndex":1}},"target":{"enable":false,"video":{"dbSection":"static","menuType":"spell","animation":"curewounds","variant":"01","color":"blue","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"addTokenWidth":false,"anchor":"0.5","contrast":0,"delay":0,"elevation":1000,"fadeIn":250,"fadeOut":500,"isMasked":false,"isRadius":false,"opacity":1,"persistent":false,"repeat":1,"repeatDelay":250,"saturate":0,"size":1,"tint":false,"tintColor":"#FFFFFF","unbindAlpha":false,"unbindVisibility":false,"zIndex":1}},"isEnabled":true,"isCustomized":true,"fromAmmo":false,"version":5},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Death Throes","type":"script","scope":"global","command":"/*\n\tOn their death, dark folk return to the endless flowing darkness from whence they came. Their form appears when evil-hearted determination coalesces from the cold, black depths of nihilism, and their demise shatters the bonds that held this negative energy together.\n\n\tWhen the dark folk dies, it explodes into a flash of blinding darkness in a 20- foot radius. The darkness lingers for 1 minute.\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Death Throes\";\n\ntry {\n\tif (args[0].macroPass === \"postActiveEffects\") {\n\t\t// get the template\n\t\tconst lastArg = args[args.length - 1];\n\t\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\t\t\n\t\tlet templateDoc = canvas.scene.collections.templates.get(lastArg.templateId);\n\t\tif (templateDoc) {\n\t\t\t// add the walls to block vision\n\t\t\tlet radius = canvas.grid.size * (templateDoc.distance / canvas.grid.grid.options.dimensions.distance);\n\t\t\tawait circleWall(templateDoc.x, templateDoc.y, radius);\n\t\t\t\n\t\t\t// delete the template\n\t\t\tawait canvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [templateDoc.id]);\n\t\t}\n\t}\t\n\telse if (args[0] === \"off\") {\n\t\tasync function removeWalls() {\n\t\t\tlet darkWalls = canvas.walls.placeables.filter(w => w.document.flags[\"midi-srd\"]?.DeathThroes?.ActorId === actor.id)\n\t\t\tlet wallArray = darkWalls.map(function (w) {\n\t\t\t\treturn w.document._id;\n\t\t\t})\n\t\t\tawait canvas.scene.deleteEmbeddedDocuments(\"Wall\", wallArray);\n\t\t}\n\t\tawait removeWalls();\t\t\n\t}\n\n} catch (err) {\n    console.error(`${optionName} : ${version}`, err);\n}\n\nasync function circleWall(cx, cy, radius) {\n\tlet data = [];\n\tconst step = 15;\n\tfor (let i = step; i <= 360; i += step) {\n\t\tlet theta0 = Math.toRadians(i - step);\n\t\tlet theta1 = Math.toRadians(i);\n\n\t\tlet lastX = Math.floor(radius * Math.cos(theta0) + cx);\n\t\tlet lastY = Math.floor(radius * Math.sin(theta0) + cy);\n\t\tlet newX = Math.floor(radius * Math.cos(theta1) + cx);\n\t\tlet newY = Math.floor(radius * Math.sin(theta1) + cy);\n\n\t\tdata.push({\n\t\t\tc: [lastX, lastY, newX, newY],\n\t\t\tmove: CONST.WALL_MOVEMENT_TYPES.NONE,\n\t\t\tsense: CONST.WALL_SENSE_TYPES.NORMAL,\n\t\t\tdir: CONST.WALL_DIRECTIONS.BOTH,\n\t\t\tdoor: CONST.WALL_DOOR_TYPES.NONE,\n\t\t\tds: CONST.WALL_DOOR_STATES.CLOSED,\n\t\t\tflags: { \"midi-srd\": { DeathThroes: { ActorId: actor.id } } }\n\t\t});\n\t}\n\tawait canvas.scene.createEmbeddedDocuments(\"Wall\", data)\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677427035494,"modifiedTime":1677456271549,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"Tcjkt0bk7YQ0JpSm"}
{"name":"Gruumsh's Fury","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Gruumsh's Fury.</strong></em>","fullName":"Gruumsh's Fury."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.8W8Q7sytF4ixL895.Item.0ykv5h5hpsrnid2l"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.8W8Q7sytF4ixL895.Item.0ykv5h5hpsrnid2l","hash":"1fa571913a0a766e9516f33551b51deadecd23a4"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false}},"effects":[{"label":"Gruumsh's Fury","icon":"icons/skills/melee/hand-grip-hammer-spiked-blue.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.Us1MeAdwd795VjZr","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"bsTopGQabE8ysWwT","changes":[{"key":"system.bonuses.mwak.damage","mode":2,"value":"1d8","priority":20},{"key":"system.bonuses.rwak.damage","mode":2,"value":"1d8","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/skills/melee/hand-grip-hammer-spiked-blue.webp","system":{"description":{"value":"<p>The orc deals an extra 4 (1d8) damage when it hits with a weapon attack.</p>","chat":"","unidentified":""},"source":"Critical Role: Call of the Netherdeep pg 71","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677114090200,"modifiedTime":1677114230687,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"Us1MeAdwd795VjZr"}
{"name":"Change Shape (Large Spider)","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Change Shape (Recharges after a Short or Long Rest).</strong>","fullName":"Change Shape (Recharges after a Short or Long Rest)."},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.nVXDzOcHMtx2vdus.Item.dnzbqryq8aevxqfi"},"scene-packer":{"hash":"8bb603202e55d539fefcd1d68076d5ff34f6bfc8","sourceId":"Item.ks58isnt5N9fKW7P"},"autoanimations":{"id":"89f2f7b9-d901-4cdb-b47f-247a60296879","label":"Change Shape (Large Spider)","levels3d":{"type":"explosion","data":{"color01":"#FFFFFF","color02":"#FFFFFF","spritePath":"modules/levels-3d-preview/assets/particles/dust.png"},"sound":{"enable":false},"secondary":{"enable":false,"data":{"color01":"#FFFFFF","color02":"#FFFFFF","spritePath":"modules/levels-3d-preview/assets/particles/dust.png"}}},"macro":{"enable":false,"playWhen":"0"},"menu":"ontoken","primary":{"video":{"dbSection":"static","menuType":"magicsign","animation":"transmutation","variant":"02","color":"purple","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"addTokenWidth":false,"anchor":"0.5","contrast":0,"delay":0,"elevation":1000,"fadeIn":250,"fadeOut":500,"isMasked":false,"isRadius":false,"isWait":false,"opacity":1,"persistent":false,"playbackRate":1,"playOn":"default","repeat":1,"repeatDelay":250,"saturate":0,"size":1,"tint":false,"tintColor":"#FFFFFF","unbindAlpha":false,"unbindVisibility":false,"zIndex":1}},"secondary":{"enable":false,"video":{"dbSection":"static","menuType":"spell","animation":"curewounds","variant":"01","color":"blue","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"addTokenWidth":false,"anchor":"0.5","contrast":0,"delay":0,"elevation":1000,"fadeIn":250,"fadeOut":500,"isMasked":false,"isRadius":true,"isWait":false,"opacity":1,"repeat":1,"repeatDelay":250,"saturate":0,"size":1.5,"tint":false,"tintColor":"#FFFFFF","zIndex":1}},"soundOnly":{"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75}},"source":{"enable":false,"video":{"dbSection":"static","menuType":"spell","animation":"curewounds","variant":"01","color":"blue","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"addTokenWidth":false,"anchor":"0.5","contrast":0,"delay":0,"elevation":1000,"fadeIn":250,"fadeOut":500,"isMasked":false,"isRadius":false,"isWait":true,"opacity":1,"repeat":1,"repeatDelay":250,"saturate":0,"size":1,"tint":false,"tintColor":"#FFFFFF","zIndex":1}},"target":{"enable":false,"video":{"dbSection":"static","menuType":"spell","animation":"curewounds","variant":"01","color":"blue","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"addTokenWidth":false,"anchor":"0.5","contrast":0,"delay":0,"elevation":1000,"fadeIn":250,"fadeOut":500,"isMasked":false,"isRadius":false,"opacity":1,"persistent":false,"repeat":1,"repeatDelay":250,"saturate":0,"size":1,"tint":false,"tintColor":"#FFFFFF","unbindAlpha":false,"unbindVisibility":false,"zIndex":1}},"isEnabled":true,"isCustomized":true,"fromAmmo":false,"version":5},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Change Shape (Large Spider)","type":"script","scope":"global","command":"const version = \"10.0.0\";\nconst optionName = \"NPC Morph (Spider)\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\tconst newName = \"Spider Form (Drow)\";\n\t\n\tif (args[0] === \"on\") {\n\t\tconst updates = {\n\t\t\ttoken : {\n\t\t\t\tname: newName,\n\t\t\t\tscale: 2,\n\t\t\t\t\"texture.src\": \"modules/fvtt-trazzm-homebrew-5e/assets/monsters/giant-spider.webp\",\n\t\t\t},\n\t\t\tactor: {\n\t\t\t\tname: newName,\n\t\t\t\tsystem: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tmovement: {climb: 30}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t/* Mutate the actor */\n\t\tawait warpgate.mutate(actorToken.document, updates);\n\t}\n\telse if (args[0] === \"off\") {\n\t\tawait warpgate.revert(actorToken.document);\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[{"label":"Change Shape","icon":"icons/creatures/magical/humanoid-giant-forest-blue.webp","origin":"Item.ks58isnt5N9fKW7P","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"uE90r1Dwtxmzdx0K","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["zeroHP"]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/creatures/magical/humanoid-giant-forest-blue.webp","system":{"description":{"value":"<p><em><strong></strong></em> The drow magically transforms into a Large spider, remaining in that form for up to 1 hour, or back into its true form. Its statistics, other than its size, are the same in each form. It can speak and cast spells while in spider form. Any equipment it is wearing or carrying in Humanoid form melds into the spider form. It can’t activate, use, wield, or otherwise benefit from any of its equipment. It reverts to its Humanoid form if it dies.</p>","chat":"","unidentified":""},"source":"Mordenkainen Presents: Monsters of the Multiverse pg 99","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":"1","units":"hour"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":5,"charged":true}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675831989717,"modifiedTime":1675875858978,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"VId4ciuZDs8oW5Cw"}
{"name":"Daylight Emanation","type":"feat","img":"icons/magic/light/beam-explosion-orange.webp","system":{"description":{"value":"<p>If you are within 60 feet of it, you can speak its command word and cause it to emanate the light or daylight spell. Once used, the daylight effect can't be used again until the next dawn.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"special","cost":null,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":1,"max":"1","per":"day","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[{"label":"Daylight Emanation","icon":"icons/magic/light/beam-explosion-orange.webp","origin":"Item.LKy1rDDA4Bbapq0P","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"tv5PBm6k6gzPGJSn","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"flags":{"scene-packer":{"hash":"3f4e483a860b597f67b7b2c0f8b8929328fcd9c3","sourceId":"Item.nznb1a9I1ovBZG3D"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Daylight Emanation","type":"script","scope":"global","command":"const version = \"10.0.0\";\nconst optionName = \"Driftglobe Dayight Emanation\";\nconst lightingFlagName = \"driftglobe-daylight\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tlet actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tlet actorToken = canvas.tokens.get(lastArg.tokenId);\n\t\n\tif (args[0] === \"on\") {\n\t\t// get and stash the current data\n\t\tvar tokenLighting = actorToken.document.light;\n\t\tDAE.setFlag(actor, lightingFlagName, {\n\t\t\tname : optionName,\n\t\t\tlightDim: tokenLighting.dim,\n\t\t\tlightBright: tokenLighting.bright,\n\t\t\tlightAngle: tokenLighting.angle,\n\t\t\tlightAlpha: tokenLighting.alpha,\n\t\t\tlightColor: tokenLighting.color,\n\t\t\tlightAnimationIntensity: tokenLighting.animation.intensity,\n\t\t\tlightAnimationSpeed: tokenLighting.animation.speed,\n\t\t\tlightAnimationType: tokenLighting.animation.type\n\t\t});\n\n\t\t// set the token lighting\n\t\tactorToken.document.update({\n\t\t\t\"light.dim\": 120, \n\t\t\t\"light.bright\": 60, \n\t\t\t\"light.angle\": 360, \n\t\t\t\"light.alpha\": 0.25,\n\t\t\t\"light.color\": \"#ffffff\",\t\t\t\n\t\t\t\"light.animation\": {\n\t\t\t\t\"type\": \"pulse\",\n\t\t\t\t\"speed\": 3,\n\t\t\t\t\"intensity\": 1\n\t\t\t}\n\t\t});\n\t\t\n\t}\n\telse if (args[0] === \"off\") {\n\t\t// reset the token lighting\n\t\tlet flag = DAE.getFlag(actor, lightingFlagName);\n\t\tif (flag) {\n\t\t\tactorToken.document.update({\n\t\t\t\t\"light.dim\": flag.lightDim, \n\t\t\t\t\"light.bright\": flag.lightBright, \n\t\t\t\t\"light.angle\": flag.lightAngle, \n\t\t\t\t\"light.alpha\": flag.lightAlpha,\n\t\t\t\t\"light.color\": flag.lightColor,\t\t\t\n\t\t\t\t\"light.animation\": {\n\t\t\t\t\t\"type\": flag.lightAnimationType,\n\t\t\t\t\t\"speed\": flag.lightAnimationSpeed,\n\t\t\t\t\t\"intensity\": flag.lightAnimationIntensity\n\t\t\t\t}\t\t\t\n\t\t\t});\n\t\t\tDAE.unsetFlag(actor, lightingFlagName);\n\t\t}\n\t}\n\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Item.LKy1rDDA4Bbapq0P"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675130048020,"modifiedTime":1675132037945,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"W7i4OKQMCr275G2w"}
{"name":"Leadership","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Leadership (Recharges after a Short or Long Rest).</strong>","fullName":"Leadership (Recharges after a Short or Long Rest)."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.gi8zK4mc8p8evASh.Item.omygcam1bfoiwmh4"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.gi8zK4mc8p8evASh.Item.omygcam1bfoiwmh4","hash":"b307685d7310dd82a8c50974e185a7bf432f9f7e"}},"effects":[{"label":"Leadership","icon":"icons/skills/melee/weapons-crossed-swords-white-blue.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.Wee23ZR3nYKWtJCv","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"vmEyIV0g17C3AoWx","changes":[{"key":"system.bonuses.All-Attacks","mode":2,"value":"1d4","priority":20},{"key":"system.bonuses.abilities.save","mode":2,"value":"1d4","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["zeroHP"]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/skills/melee/weapons-crossed-swords-white-blue.webp","system":{"description":{"value":"<p><em><strong></strong></em> For 1 minute, the hobgoblin can utter a special command or warning whenever a nonhostile creature that it can see within 30 feet of it makes an attack roll or a saving throw. The creature can add a d4 to its roll provided it can hear and understand the hobgoblin. A creature can benefit from only one Leadership die at a time. This effect ends if the hobgoblin is incapacitated.</p>","chat":"","unidentified":""},"source":"Monster Manual pg 186","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"1","units":"minute"},"cover":null,"target":{"value":1,"width":null,"units":"","type":"ally"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"sr","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676993631674,"modifiedTime":1676994247871,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"Wee23ZR3nYKWtJCv"}
{"name":"Tree Stride","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Tree Stride.</strong></em>","fullName":"Tree Stride."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.w2NH9FHAddci86kV.Item.8jt1spy17ons7f3b"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.w2NH9FHAddci86kV.Item.8jt1spy17ons7f3b","hash":"6a6be932eb8d56dbeefdd5092563a58f5f736fd6"},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Tree Stride","type":"script","scope":"global","command":"const version = \"10.0.0\";\nconst optionName = \"Tree Stride\";\n\ntry {\n\tif (args[0].macroPass === \"postActiveEffects\") {\n\t\tconst lastArg = args[args.length - 1];\n\t\tlet actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\t\tlet actorToken = canvas.tokens.get(lastArg.tokenId);\n\t\tconst maxRange = lastArg.item.system.range.value ?? 60;\n\n\t\t// transport the caster\t\t\n\t\tlet position = await HomebrewMacros.warpgateCrosshairs(actorToken, maxRange, lastArg.item, actorToken);\n\t\tif (position) {\n\t\t\t// check for token collision\n\t\t\tconst newCenter = canvas.grid.getSnappedPosition(position.x - actorToken.width / 2, position.y - actorToken.height / 2, 1);\n\t\t\tif (HomebrewMacros.checkPosition(newCenter.x, newCenter.y)) {\n\t\t\t\tui.notifications.error(`${optionName} - can't teleport on top of another token`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tconst portalScale = actorToken.w / canvas.grid.size * 0.7;\n\t\t\tnew Sequence()\n\t\t\t\t.animation()\n\t\t\t\t.on(actorToken)\n\t\t\t\t.fadeOut(250)\n\t\t\t\t.teleportTo(position, { relativeToCenter: true, delay: 250})\n\t\t\t\t.snapToGrid()\n\t\t\t\t.waitUntilFinished()\n\t\t\t\t.animation()\n\t\t\t\t.on(actorToken)\n\t\t\t\t.fadeIn(250)\n\t\t\t\t.play();\n\t\t}\n\t\telse {\n\t\t\tui.notifications.error(`${optionName} - invalid stride location`);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName} ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"autoanimations":{"id":"6b60d025-abed-421d-82ed-f04ac24e0e2d","label":"Tree Stride","levels3d":{"type":"explosion","data":{"color01":"#FFFFFF","color02":"#FFFFFF","spritePath":"modules/levels-3d-preview/assets/particles/dust.png"},"sound":{"enable":false},"secondary":{"enable":false,"data":{"color01":"#FFFFFF","color02":"#FFFFFF","spritePath":"modules/levels-3d-preview/assets/particles/dust.png"}}},"macro":{"enable":false},"meleeSwitch":{"video":{"dbSection":"range","menuType":"weapon","animation":"arrow","variant":"regular","color":"regular"},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"detect":"automatic","range":2,"returning":false,"switchType":"on"}},"menu":"melee","primary":{"video":{"dbSection":"melee","menuType":"weapon","animation":"club","variant":"01","color":"white","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"contrast":0,"delay":0,"elevation":1000,"isWait":false,"opacity":1,"playbackRate":1,"repeat":1,"repeatDelay":250,"saturate":0,"size":1,"tint":false,"tintColor":"#FFFFFF","zIndex":1}},"secondary":{"enable":false,"video":{"dbSection":"static","menuType":"spell","animation":"curewounds","variant":"01","color":"blue","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"addTokenWidth":false,"anchor":"0.5","contrast":0,"delay":0,"elevation":1000,"fadeIn":250,"fadeOut":500,"isMasked":false,"isRadius":true,"isWait":false,"opacity":1,"repeat":1,"repeatDelay":250,"saturate":0,"size":1.5,"tint":false,"tintColor":"#FFFFFF","zIndex":1}},"soundOnly":{"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75}},"source":{"enable":false,"video":{"dbSection":"static","menuType":"spell","animation":"curewounds","variant":"01","color":"blue","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"addTokenWidth":false,"anchor":"0.5","contrast":0,"delay":0,"elevation":1000,"fadeIn":250,"fadeOut":500,"isMasked":false,"isRadius":false,"isWait":true,"opacity":1,"repeat":1,"repeatDelay":250,"saturate":0,"size":1,"tint":false,"tintColor":"#FFFFFF","zIndex":1}},"target":{"enable":false,"video":{"dbSection":"static","menuType":"spell","animation":"curewounds","variant":"01","color":"blue","enableCustom":false,"customPath":""},"sound":{"enable":false,"delay":0,"repeat":1,"repeatDelay":250,"startTime":0,"volume":0.75},"options":{"addTokenWidth":false,"anchor":"0.5","contrast":0,"delay":0,"elevation":1000,"fadeIn":250,"fadeOut":500,"isMasked":false,"isRadius":false,"opacity":1,"persistent":false,"repeat":1,"repeatDelay":250,"saturate":0,"size":1,"tint":false,"tintColor":"#FFFFFF","unbindAlpha":false,"unbindVisibility":false,"zIndex":1}},"isEnabled":false,"isCustomized":false,"fromAmmo":false,"version":5}},"effects":[],"img":"icons/magic/nature/tree-spirit-green.webp","system":{"description":{"value":"<p><em><strong></strong></em> Once on her turn, the dryad can use 10 feet of her movement to step magically into one living tree within her reach and emerge from a second living tree within 60 feet of the first tree, appearing in an unoccupied space within 5 feet of the second tree. Both trees must be Large or bigger.</p>","chat":"","unidentified":""},"source":"Basic Rules pg 304","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":"","units":"inst"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1678336168984,"modifiedTime":1678337142057,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"XOAF4ALuzGjNIKW1"}
{"name":"Magic Resistance","type":"feat","img":"icons/magic/defensive/shield-barrier-glowing-blue.webp","effects":[{"_id":"AbJFwV7ZwGAxwv9Q","changes":[{"key":"flags.midi-qol.magicResistance.all","mode":0,"value":"1","priority":6}],"disabled":false,"duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/defensive/shield-barrier-glowing-blue.webp","label":"Magic Resistance","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-racial-traits.9AcC5Stet9yaf6kp","transfer":true,"flags":{"dae":{"selfTarget":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":true,"selfTargetAlways":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","radius":"null","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}},"tint":null}],"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-racial-traits.9AcC5Stet9yaf6kp","hash":"bcc7f1113b3b122006f20e96bbed4a44d6473d47"},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-racial-traits.9AcC5Stet9yaf6kp"}},"system":{"description":{"value":"<p>You have advantage on saving throws against spells.</p>","chat":"","unidentified":""},"source":"Mordenkainen Presents: Monsters of the Multiverse pg 29","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1673042302543,"modifiedTime":1676563391086,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"Y6nq3TzEgdoPtwJV"}
{"name":"Familiar","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Familiar.</strong></em>","fullName":"Familiar."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.pr2O8p7871mg8NtG.Item.2638toqzj6pehter"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.pr2O8p7871mg8NtG.Item.2638toqzj6pehter","hash":"6bcde58ffbaded662d86f2327c5c097929d7d355"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"effects":[],"img":"icons/environment/creatures/gargoyle-grey-blue.webp","system":{"description":{"value":"<p>The quasit can serve another creature as a familiar, forming a telepathic bond with its willing master. While the two are bonded, the master can sense what the familiar senses as long as they are within 1 mile of each other. While the quasit is within 10 feet of its master, the master shares the quasit’s Magic Resistance trait. At any time and for any reason, the quasit can end its service as a familiar, ending the telepathic bond.</p>","chat":"","unidentified":""},"source":"Monster Manual pg 63","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676570216063,"modifiedTime":1676570438319,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"bcSyyjxpJRcQJ8S3"}
{"name":"Summon Devil (Bearded)","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Summon Devil (1/Day).</strong>","fullName":"Summon Devil (1/Day)."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.UkUTkZUy36VLUMBr.Item.fjl5x2m583ukcvvn"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.UkUTkZUy36VLUMBr.Item.fjl5x2m583ukcvvn","hash":"fe449a8ff264e035af989fa832f6a1ed0222cf04"},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Devil (Bearded)","type":"script","scope":"global","command":"/*\n\tThe devil chooses what to summon and attempts a magical summoning.\n\n\tA bearded devil has a 30 percent chance of summoning one bearded devil.\n\n\tA summoned devil appears in an unoccupied space within 60 feet of its summoner, acts as an ally of its summoner, and can’t summon other devils. It remains for 1 minute, until it or its summoner dies, or until its summoner dismisses it as an action.\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Summon Bearded Devil\";\nconst summonFlag = \"summon-bearded-devil\";\nconst summonId = \"pgrp2yAfxDROUfHF\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\n\tif (args[0].macroPass === \"preItemRoll\") {\n\t\t// roll failure chance\n\t\tlet chanceRoll = await new Roll(`1d100`).evaluate({ async: true });\n\t\tawait game.dice3d?.showForRoll(chanceRoll);\t\t\n\t\treturn (chanceRoll.total <= 30);\n\t}\n\telse if (args[0] === \"on\") {\n        if (!game.modules.get(\"warpgate\")?.active) ui.notifications.error(\"Please enable the Warp Gate module\");\n\t\t\n\t\tconst sourceItem = await fromUuid(lastArg.origin);\n\n\t\t// build the update data to match summoned traits\n\t\tconst summonName = `Bearded Devil (Summoned)`;\n\t\tlet updates = {\n\t\t\ttoken: {\n\t\t\t\t\"name\": summonName,\n\t\t\t\t\"disposition\": actorToken.disposition,\n\t\t\t\t\"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER,\n\t\t\t\t\"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS,\n\t\t\t\t\"bar1\": { attribute: \"attributes.hp\" },\n\t\t\t\t\"actorLink\": false,\n\t\t\t\t\"flags\": { \"midi-srd\": { \"Summoned Devil\" : { \"ActorId\": actor.id } } }\n\t\t\t},\n\t\t\t\"name\": summonName\n\t\t};\n\t\t\n\t\tlet summonActor = game.actors.getName(summonName);\n\t\tif (!summonActor) {\n\t\t\t// Get from the compendium\n\t\t\tlet entity = await fromUuid(\"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.\" + summonId);\n\t\t\tif (!entity) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to find the actor`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// import the actor\n\t\t\tlet document = await entity.collection.importFromCompendium(game.packs.get(entity.pack), summonId, updates);\n\t\t\tif (!document) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to import from the compendium`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tawait warpgate.wait(500);\n\t\t\tsummonActor = game.actors.getName(summonName);\n\t\t}\n\t\t\n\t\t// Spawn the result\n\t\tconst maxRange = 60;\n\t\tlet position = await HomebrewMacros.warpgateCrosshairs(actorToken, maxRange, sourceItem, summonActor.prototypeToken);\n\t\tif (position) {\n\t\t\t// check for token collision\n\t\t\tconst newCenter = canvas.grid.getSnappedPosition(position.x - summonActor.prototypeToken.width / 2, position.y - summonActor.prototypeToken.height / 2, 1);\n\t\t\tif (HomebrewMacros.checkPosition(newCenter.x, newCenter.y)) {\n\t\t\t\tui.notifications.error(`${optionName} - can't teleport on top of another token`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst result = await warpgate.spawnAt(position, summonName, updates, { controllingActor: actor }, {});\n\t\t\tif (!result || !result[0]) {\n\t\t\t\tui.notifications.error(`${optionName} - Unable to spawn`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet summonedToken = canvas.tokens.get(result[0]);\n\t\t\tif (summonedToken) {\n\t\t\t\tawait anime(actorToken, summonedToken);\n\t\t\t\tawait actor.setFlag(\"midi-qol\", summonFlag, summonedToken.id);\n\t\t\t\tawait summonedToken.toggleCombat();\n\t\t\t\tawait summonedToken.actor.rollInitiative();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\tui.notifications.error(`${optionName} - invalid summon location`);\n\t\t\treturn false;\n\t\t}\n\t}\n\telse if (args[0] === \"off\") {\n\t\t// delete the summon\n\t\tconst lastSummon = actor.getFlag(\"midi-qol\", summonFlag);\n\t\tif (lastSummon) {\n\t\t\tawait actor.unsetFlag(\"midi-qol\", summonFlag);\n\t\t\tawait warpgate.dismiss(lastSummon, game.canvas.scene.id);\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}\n\nasync function anime(token, target) {\n    new Sequence()\n        .effect()\n        .file(\"jb2a.misty_step.01.red\")       \n        .atLocation(target)\n\t\t.scaleToObject(1)\n\t\t.play();\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[{"label":"Summon Devil","icon":"icons/creatures/unholy/demon-fire-horned-mask.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.eTo8nc8RtsB6SI0I","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"IiKg8Q7aNU2qDHPA","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["zeroHP"]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/creatures/unholy/demon-fire-horned-mask.webp","system":{"description":{"value":"<p><em><strong></strong></em> The devil chooses what to summon and attempts a magical summoning.</p><p>A bearded devil has a 30 percent chance of summoning one bearded devil.</p><p>A summoned devil appears in an unoccupied space within 60 feet of its summoner, acts as an ally of its summoner, and can’t summon other devils. It remains for 1 minute, until it or its summoner dies, or until its summoner dismisses it as an action.</p>","chat":"","unidentified":""},"source":"Monster Manual pg 70","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"1","units":"minute"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"day","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1677009223893,"modifiedTime":1677020401687,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"eTo8nc8RtsB6SI0I"}
{"name":"Conjure Animals (2 giant spiders)","type":"spell","img":"icons/magic/nature/wolf-paw-glow-green.webp","effects":[{"_id":"oaW2x9WJTdRux4oT","changes":[{"key":"macro.itemMacro","mode":0,"value":"@item.level","priority":20}],"disabled":false,"duration":{"seconds":null,"startTime":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/magic/nature/wolf-paw-glow-green.webp","label":"Conjure Animals","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-spells.1Drt0SHxbEAHxprN","transfer":false,"flags":{"dae":{"selfTarget":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[],"transfer":false,"selfTargetAlways":false},"core":{"statusId":""},"dnd5e-helpers":{"rest-effect":"Ignore"},"ActiveAuras":{"isAura":false,"aura":"None","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false,"radius":"null"}},"tint":null}],"flags":{"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-spells.1Drt0SHxbEAHxprN"},"midi-qol":{"effectActivation":false,"onUseMacroName":""},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"autoFailFriendly":false,"offHandWeapon":false,"ignoreTotalCover":false,"autoSaveFriendly":false},"itemacro":{"macro":{"name":"Conjure Animals (2 giant spiders)","type":"script","author":"5vlmE3uiS7OIQTEf","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"10.0.1\";\nconst optionName = \"Conjure Animals\";\nconst summonFlag = \"conjure-animals\";\nconst summonId = \"FdCL6zWkQCoglDjT\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\n\tif (args[0] === \"on\") {\n        if (!game.modules.get(\"warpgate\")?.active) ui.notifications.error(\"Please enable the Warp Gate module\")\n\t\t\n\t\tconst sourceItem = await fromUuid(lastArg.origin);\n\t\tconst spellLevel = Number(args[1]);\n\t\tlet levelMultiplier = {1: 1, 2: 1, 3: 1, 4: 1, 5: 2, 6: 2, 7: 3, 8: 3, 9: 4};\n\t\tconst multiplier = levelMultiplier[spellLevel];\n\t\tlet counts = 2*multiplier;\n\t\t\n\t\tlet mightySummoner = false;\n\t\tif (actor.items.getName(\"Mighty Summoner\") !== undefined) {\n\t\t\tmightySummoner = true;\n\t\t}\n\t\t\n\t\t// Get the actor\n\t\tlet entity = await fromUuid(\"Compendium.\" + collectionName + \".\" + summonId);\n\t\tif (!entity) {\n\t\t\tui.notifications.error(`${optionName} - unable to find the creature: ${resultData.text}`);\n\t\t\treturn false;\n\t\t}\n\n\t\t// build the update data to match summoned traits\n\t\tconst summonName = `${entity.name} (${actor.name})`;\n\t\tconst name = \"Summoned (\" + entity.name + \")\";\n\t\tlet updates = {\n\t\t\ttoken: {\n\t\t\t\t\"name\": summonName,\n\t\t\t\t\"disposition\": CONST.TOKEN_DISPOSITIONS.FRIENDLY,\n\t\t\t\t\"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER,\n\t\t\t\t\"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS,\n\t\t\t\t\"bar1\": { attribute: \"attributes.hp\" },\n\t\t\t\t\"actorLink\": false,\n\t\t\t\t\"flags\": { \"midi-srd\": { \"Conjured Animal\" : { \"ActorId\": actor.id } } }\n\t\t\t},\n\t\t\t\"name\": summonName,\n\t\t\t\"system.details\": { \n\t\t\t\t\"type.value\": \"fey\"\n\t\t\t}\n\t\t};\n\n\t\tif (mightySummoner) {\n\t\t\t// modify for mighty summoner\n\t\t\tlet originalHPFormula = entity.system.attributes.hp.formula;\n\t\t\tlet hitDice = originalHPFormula.match(/(\\d+)d\\d+/)[1];\n\t\t\tif (hitDice === null || hitDice === undefined || hitDice === 0) {\n\t\t\t\thitDice = 1;\n\t\t\t}\n\t\t\tconst bonusHP = hitDice * 2;\n\t\t\tlet newHPFormula = originalHPFormula + \"+\" + bonusHP;\n\t\t\tupdates = {\n\t\t\t\ttoken: {\n\t\t\t\t\t\"name\": summonName,\n\t\t\t\t\t\"disposition\": CONST.TOKEN_DISPOSITIONS.FRIENDLY,\n\t\t\t\t\t\"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER,\n\t\t\t\t\t\"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS,\n\t\t\t\t\t\"bar1\": { attribute: \"attributes.hp\" },\n\t\t\t\t\t\"actorLink\": false,\n\t\t\t\t\t\"flags\": { \"midi-srd\": { \"Conjured Animal\" : { \"ActorId\": actor.id } } }\n\t\t\t\t},\n\t\t\t\t\"name\": summonName,\n\t\t\t\t\"system\": {\n\t\t\t\t\t\"details\": { \n\t\t\t\t\t\t\"type.value\": \"fey\"\n\t\t\t\t\t},\n\t\t\t\t\t\"attributes\": {\n\t\t\t\t\t\t\"hp.formula\": newHPFormula\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t}\n\t\t\n\t\tlet summonActor = game.actors.getName(summonName);\n\t\tif (!summonActor) {\n\t\t\t// import the actor\n\t\t\tlet document = await entity.collection.importFromCompendium(game.packs.get(entity.pack), summonId, updates);\n\t\t\tif (!document) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to import ${resultData.text} from the compendium`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tawait warpgate.wait(500);\n\n\t\t\t// mark attacks as magical\n\t\t\tlet weapons = document.items.filter(i => i.type === \"weapon\");\n\t\t\tif (weapons) {\n\t\t\t\tfor (var w of weapons) {\n\t\t\t\t\tlet copy_item = duplicate(w.toObject());\n\t\t\t\t\tcopy_item.system.properties.mgc = true;\n\t\t\t\t\tdocument.updateEmbeddedDocuments(\"Item\", [copy_item]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsummonActor = game.actors.getName(summonName);\n\t\t}\n\n\t\t// Spawn the result\n\t\tconst maxRange = sourceItem.system.range.value ? sourceItem.system.range.value : 60;\n\t\tlet position = await HomebrewMacros.warpgateCrosshairs(actorToken, maxRange, sourceItem, summonActor.prototypeToken);\n\t\tif (position) {\n\t\t\tlet options = {duplicates: choice[1], collision: true};\n\t\t\tconst spawned = await warpgate.spawnAt(position, summonName, {}, { controllingActor: actor }, options);\n\t\t\tif (!spawned || !spawned[0]) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to spawn the animals`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// keep track of the spawned critters, so that they can be deleted after the spell expires\n\t\t\tawait actor.setFlag(\"midi-qol\", summonFlag, summonName);\n\t\t}\n\t\telse {\n\t\t\tui.notifications.error(`${optionName} - invalid conjure location`);\n\t\t\treturn false;\n\t\t}\n\t}\n\telse if (args[0] === \"off\") {\n\t\t// delete the summons\n\t\tconst summonName = actor.getFlag(\"midi-qol\", summonFlag);\n\t\tif (summonName) {\n\t\t\tawait actor.unsetFlag(\"midi-qol\", summonFlag);\n\t\t\t\n\t\t\tlet tokens = canvas.tokens.ownedTokens.filter(i => i.name === summonName);\n\t\t\tfor (let i = 0; i < tokens.length; i++) {\n\t\t\t\tawait warpgate.dismiss(tokens[i].id, game.canvas.scene.id);\n\t\t\t}\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName} ${version}`, err);\n}","sort":0,"permission":{"default":0},"flags":{},"_id":null,"folder":null,"ownership":{"default":0},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-spells.1Drt0SHxbEAHxprN","hash":"9fb3ab1765f8c314708bcf09a9c82681bac04dfa"},"walledtemplates":{"enabled":true}},"system":{"description":{"value":"<p>You summon fey spirits that take the form of beasts and appear in unoccupied spaces that you can see within range. Each beast is also considered fey, and it disappears when it drops to 0 hit points or when the spell ends.</p><p>The summoned creatures are friendly to you and your companions. Roll initiative for the summoned creatures as a group, which has its own turns. They obey any verbal commands that you issue to them (no action required by you). If you don't issue any commands to them, they defend themselves from hostile creatures, but otherwise take no actions.</p><p>The GM has the creatures' statistics. Sample creatures can be found below.</p><p><strong>At Higher Levels.</strong> When you cast this spell using certain higher-level spell slots, you choose one of the summoning options above, and more creatures appear: twice as many with a 5th-level slot, three times as many with a 7th-level slot, and four times as many with a 9th-level slot.<br /><br /></p><p><strong>Sample Creatures</strong></p><table class=\"summoning-creatures-table\" style=\"width:100%\"><thead><tr><td style=\"width:4.7789%\"><strong>CR</strong></td><td style=\"width:95.2211%\"><strong>Creature Name</strong></td></tr></thead><tbody><tr><td style=\"width:4.7789%\"><strong>0</strong></td><td style=\"width:95.2211%\">Frog, Sea Horse, Baboon, Badger, Bat, Cat, Crab, Deer, Eagle, Giant Fire Beetle, Goat, Hawk, Hyena, Jackal, Lizard, Octopus, Owl, Quipper, Rat, Raven, Scorpion, Spider, Vulture, Weasel</td></tr><tr><td style=\"width:4.7789%\"><strong>1/8</strong></td><td style=\"width:95.2211%\">Blood Hawk, Camel, Flying Snake, Giant Crab, Giant Rat, Giant Weasel, Mastiff, Mule, Poisonous Snake, Pony, Stirge</td></tr><tr><td style=\"width:4.7789%\"><strong>1/4</strong></td><td style=\"width:95.2211%\">Axe Beak, Boar, Constrictor Snake, Draft Horse, Elk, Giant Badger, Giant Bat, Giant Centipede, Giant Frog, Giant Lizard, Giant Owl, Giant Poisonous Snake, Giant Wolf Spider, Panther, Riding Horse, Wolf</td></tr><tr><td style=\"width:4.7789%\"><strong>1/2</strong></td><td style=\"width:95.2211%\">Ape, Black Bear, Crocodile, Giant Goat, Giant Sea Horse, Giant Wasp, Reef Shark, Warhorse</td></tr><tr><td style=\"width:4.7789%\"><strong>1</strong></td><td style=\"width:95.2211%\">Brown Bear, Dire Wolf, Giant Eagle, Giant Hyena, Giant Octopus, Giant Spider, Giant Toad, Giant Vulture, Lion, Tiger</td></tr><tr><td style=\"width:4.7789%\"><strong>2</strong></td><td style=\"width:95.2211%\">Giant Boar, Giant Constrictor Snake, Giant Elk, Hunter Shark, Plesiosaurus, Polar Bear, Rhinoceros, Saber-toothed Tiger</td></tr></tbody></table><p> </p>","chat":"","unidentified":""},"source":"Basic Rules, Player's Handbook pg 127","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"1","units":"hour"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":3,"school":"con","components":{"vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1673042299872,"modifiedTime":1676682245588,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"gFgXCL1jFfGIJpoe"}
{"name":"Parry","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Parry.</strong>","fullName":"Parry."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.KeMlPV57gY8R7MD7.Item.bqgcglrt5hpjxuda"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.KeMlPV57gY8R7MD7.Item.bqgcglrt5hpjxuda","hash":"44df1fe43d899bf06abcdd89ebde9fad30585dc4"}},"effects":[{"label":"Parry","icon":"icons/weapons/swords/swords-short.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.hKikZo1sODmN1MAl","duration":{"startTime":null,"seconds":6,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"MFdgyUIQFLDREjyZ","changes":[{"key":"system.attributes.ac.bonus","mode":2,"value":"3","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["isAttacked"]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/weapons/swords/swords-short.webp","system":{"description":{"value":"<p><em><strong></strong></em> The hobgoblin adds 3 to its AC against one melee attack that would hit it. To do so, the hobgoblin must see the attacker and be wielding a melee weapon.</p>","chat":"","unidentified":""},"source":"Monster Manual pg 187","activation":{"type":"reaction","cost":1,"condition":""},"duration":{"value":"","units":"inst"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676999906918,"modifiedTime":1677000022261,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"hKikZo1sODmN1MAl"}
{"name":"Keen Hearing and Smell","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Keen Hearing and Smell.</strong></em>","fullName":"Keen Hearing and Smell."},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.Q4WC7lBN3fICRauZ.Item.rnd1op3b2fc9neqv"},"scene-packer":{"hash":"7a2b188f3a42678dc9f6e42ed08c9462fa9edac4","sourceId":"Item.UbhRAYdI7iKV3sp0"}},"effects":[{"label":"Keen Hearing and Smell","icon":"icons/commodities/biological/ear-grey-brown.webp","origin":"Item.UbhRAYdI7iKV3sp0","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"SrC5GMVpcY9hCLmY","changes":[{"key":"flags.midi-qol.advantage.skill.prc","mode":0,"value":"1","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/commodities/biological/ear-grey-brown.webp","system":{"description":{"value":"<p><em><strong></strong></em> The hound has advantage on Wisdom (Perception) checks that rely on hearing or smell.</p>","chat":"","unidentified":""},"source":"Basic Rules pg 139","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675361775580,"modifiedTime":1675361846793,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"hdNVzQcnTmYuPVAH"}
{"name":"Death Lance","type":"weapon","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Death Lance.</strong>","fullName":"Death Lance."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.jkhW0YmxeRFAstqF.Item.8ewovpq2jgv4f1oh"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.jkhW0YmxeRFAstqF.Item.8ewovpq2jgv4f1oh","hash":"31f55a7a8bc3cb79ce5a20dca579f2c24621dcd9"},"midi-qol":{"fumbleThreshold":null,"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"name":"Death Lance","type":"script","scope":"global","command":"/*\n\tMelee Weapon Attack: +10 to hit, reach 5 ft., one target. Hit: 8 (1d6 + 5) piercing damage plus 18 (4d8) necrotic damage.\n\tThe target’s hit point maximum is reduced by an amount equal to the necrotic damage taken. This reduction lasts until\n\tthe target finishes a long rest. The target dies if its hit point maximum is reduced to 0.\n*/\nconst version = \"10.0.1\";\nconst optionName = \"Death Lance\";\n\ntry {\n\tif (args[0].macroPass === \"postActiveEffects\") {\n\t\tconst lastArg = args[args.length - 1];\n\t\tconst targetTokenDoc = lastArg.hitTargets.length > 0 ? lastArg.hitTargets[0] : undefined;\n\t\t\n\t\tif (targetTokenDoc) {\n\t\t\tconst nectroticDamage = lastArg.damageDetail.find(i => i.type === \"necrotic\");\n\t\t\t\n\t\t\tif (nectroticDamage.damage > 0) {\t\t\n\t\t\t\t// apply hp max reduction\n\t\t\t\tlet currentMax = targetTokenDoc.actor.system.attributes.hp.max;\n\t\t\t\tconst newMax = Math.max(0, currentMax - nectroticDamage.damage);\n\t\t\t\t\n\t\t\t\tconst updates = {\n\t\t\t\t\tactor: {\n\t\t\t\t\t\t\"system.attributes.hp.max\": newMax\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t/* Mutate the actor */\n\t\t\t\tawait warpgate.mutate(targetTokenDoc, updates);\n\t\t\t\tChatMessage.create({\n\t\t\t\t\tcontent: `${targetTokenDoc.actor.name} is drained`,\n\t\t\t\t\tspeaker: ChatMessage.getSpeaker({ actor: actor })});\n\n\t\t\t\t// check for death\n\t\t\t\tif (newMax === 0) {\n\t\t\t\t\tawait targetTokenDoc.actor.update({\"system.attributes.hp.value\": 0});\n\t\t\t\t\tawait applyDeathEffect(lastArg.sourceItemUuid, targetTokenDoc.actor);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}\n\nasync function applyDeathEffect(originId, target) {\n\n    let effectData = [{\n        label: optionName,\n        icon: 'icons/magic/death/grave-tombstone-glow-teal.webp',\n        origin: originId,\n        transfer: false,\n        disabled: false,\n        changes: [\n            { key: `macro.CE`, mode: CONST.ACTIVE_EFFECT_MODES.CUSTOM, value: \"Dead\", priority: 20 }\n        ]\n    }];\n    await MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: target.uuid, effects: effectData });\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[],"img":"icons/magic/fire/projectile-arrow-fire-purple.webp","system":{"description":{"value":"<p><em><strong></strong> Melee Weapon Attack:</em> +10 to hit, reach 5 ft., one target. <em>Hit:</em> 8 (1d6 + 5) piercing damage plus 18 (4d8) necrotic damage. The target’s hit point maximum is reduced by an amount equal to the necrotic damage taken. This reduction lasts until the target finishes a long rest. The target dies if its hit point maximum is reduced to 0.</p>","chat":"","unidentified":""},"source":"Mordenkainen Presents: Monsters of the Multiverse pg 102","quantity":1,"weight":0,"price":{"value":0,"denomination":"gp"},"attunement":0,"equipped":true,"rarity":"uncommon","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"","units":"inst"},"cover":null,"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"wis","actionType":"mwak","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d6 + @mod","piercing"],["4d8","necrotic"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{"amm":false,"fin":false,"fir":false,"foc":false,"hvy":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":false,"ada":false,"mgc":false,"sil":false},"proficient":true},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1676525051270,"modifiedTime":1677034553290,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"iLs6wWq9BBII1Q35"}
{"name":"Poisonous Shadows","type":"feat","img":"icons/magic/unholy/silhouette-evil-horned-giant.webp","system":{"description":{"value":"<p>As a reaction to being poisoned or suffering poison damage, the drow can transfer the poison into its shadow, immediately ending any ongoing poison damage and the poisoned condition. Abrupt exposure to total darkness or magical light ends this effect. After a short rest, the drow’s shadow is no longer poisoned.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"reactionmanual","cost":1,"condition":""},"duration":{"value":"","units":"inst"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":1,"max":"1","per":"sr","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[],"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"flags":{"scene-packer":{"hash":"b28c1ed80e5ca5a9518b36c902137461ca3d3a8c","sourceId":"Item.ca2iW51WSg7pYf8W"},"midi-qol":{"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Item.ca2iW51WSg7pYf8W"},"itemacro":{"macro":{"name":"Poisonous Shadows","type":"script","scope":"global","command":"/*\n\tAs a reaction to being poisoned or suffering poison damage, the drow can transfer the poison into its shadow, immediately ending any ongoing poison damage and the poisoned condition. Abrupt exposure to total darkness or magical light ends this effect. After a short rest, the drow’s shadow is no longer poisoned.\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Poisonous Shadows\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\n\tif (args[0].macroPass === \"postActiveEffects\") {\n\t\tlet actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\t\tconst actorToken = await canvas.tokens.get(lastArg.tokenId);\n\t\t\n\t\t// look for ongoing poison damage\n\t\t// flags.midi-qol.OverTime\n\t\t// k => k.filter(e => e.text !== 'ZEC')\n\t\tlet overtimeEffects = actor.effects.filter(eff => eff.changes.find(i => (i.key === \"flags.midi-qol.OverTime\" && i.value.includes(\"damageType=poison\"))));\n\t\tif (overtimeEffects && overtimeEffects.length > 0) {\n\t\t\tfor (let effect of overtimeEffects) {\n\t\t\t\tawait HomebrewMacros.removeEffect(effect);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// look for poisoned effect\n\t\tlet poisonedEffects = actor.effects.filter(eff => eff.label === \"Poisoned\");\n\t\tif (poisonedEffects && poisonedEffects.length > 0) {\n\t\t\tfor (let effect of poisonedEffects) {\n\t\t\t\tawait HomebrewMacros.removeEffect(effect);\n\t\t\t}\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677438455029,"modifiedTime":1677449760140,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"j4TjmlsP0fUYyA7N"}
{"name":"Ghoul Claws","type":"weapon","img":"icons/creatures/claws/claw-talons-glowing-orange.webp","system":{"description":{"value":"<p><em>Melee Weapon Attack:</em> +4 to hit, reach 5 ft., one target. <em>Hit:</em> 7 (2d4 + 2) slashing damage. If the target is a creature other than an elf or undead, it must succeed on a DC 10 Constitution saving throw or be paralyzed for 1 minute. The target can repeat the saving throw at the end of each of its turns, ending the effect on itself on a success.</p>","chat":"","unidentified":""},"source":"","quantity":1,"weight":0,"price":{"value":0,"denomination":"gp"},"attunement":0,"equipped":true,"rarity":"","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"","units":"inst"},"cover":null,"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"mwak","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["2d4 + @mod","slashing"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":null},"hp":{"value":null,"max":null,"dt":null,"conditions":""},"weaponType":"natural","baseItem":"","properties":{"ada":false,"amm":false,"fin":true,"fir":false,"foc":false,"hvy":false,"lgt":true,"lod":false,"mgc":false,"rch":false,"rel":false,"ret":false,"sil":false,"spc":false,"thr":false,"two":false,"ver":false},"proficient":true},"effects":[],"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"flags":{"scene-packer":{"hash":"e3d9fbacbdd6aede1fe95b256b057c7f83ba6c77","sourceId":"Item.tr0F7Sk8E8wYwBLh"},"midi-qol":{"fumbleThreshold":null,"effectActivation":false,"onUseMacroName":"[postActiveEffects]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Item.tr0F7Sk8E8wYwBLh"},"itemacro":{"macro":{"name":"Ghoul Claws","type":"script","scope":"global","command":"/*\n\t If the target is a creature other than an elf or undead, it must succeed on a DC 10 Constitution saving throw or be paralyzed for 1 minute. The target can repeat the saving throw at the end of each of its turns, ending the effect on itself on a success.\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Ghoul Claws\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\t\n\tif ((args[0].macroPass === \"postActiveEffects\") && (lastArg.hitTargets.length > 0)) {\n\t\tconst targetToken = game.canvas.tokens.get(lastArg.hitTargets[0].id);\n\t\t\n\t\t// check creature type\n\t\tlet creatureType = targetToken.actor.system.details.type;\n\t\tif (creatureType) {\n\t\t\tif (creatureType.value && creatureType.value.toLowerCase() === \"undead\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (creatureType.value && creatureType.value.toLowerCase() === \"humanoid\" && creatureType.subtype && creatureType.subtype.toLowerCase() === \"elf\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// roll save\n\t\tlet saveRoll = await targetToken.actor.rollAbilitySave(\"con\", {flavor: 'Ghoul Claws', dc: 10});\n\t\tif (saveRoll.total < 10) {\n\t\t\tconst effectData = {\n\t\t\t\tlabel: `${optionName}`,\n\t\t\t\ticon: lastArg.item.img,\n\t\t\t\torigin: actor.uuid,\n\t\t\t\tduration: {startTime: game.time.worldTime, seconds: 60},\n\t\t\t\tchanges: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: `flags.midi-qol.OverTime`, \n\t\t\t\t\t\tmode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE, \n\t\t\t\t\t\tvalue: `turn=end, label=Paralyzed, saveDC=10, saveAbility=con`, \n\t\t\t\t\t\tpriority: 20\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'macro.CE',\n\t\t\t\t\t\tmode: CONST.ACTIVE_EFFECT_MODES.CUSTOM,\n\t\t\t\t\t\tvalue: \"Paralyzed\",\n\t\t\t\t\t\tpriority: 21\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\ttransfer: false,\n\t\t\t\tdisabled: false\n\t\t\t};\n\t\t\t\n\t\t\tawait MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: targetToken.actor.uuid, effects: [effectData] });\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}\n\nasync function wait(ms) { return new Promise(resolve => { setTimeout(resolve, ms); });}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1678569868820,"modifiedTime":1678575873374,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"l4V8Z0jxRGdmUv2M"}
{"name":"Sunlight Weakness","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Sunlight Weakness.</strong></em>","fullName":"Sunlight Weakness."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.DzZOPFOVHUSbISuU.Item.t27dla9980el7lh0"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.DzZOPFOVHUSbISuU.Item.t27dla9980el7lh0","hash":"65762435ae14bdcad46da501a32436b0f48e08aa"}},"effects":[{"label":"Sunlight Weakness","icon":"icons/magic/nature/root-vine-thorned-fire-purple.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.lemhgAbpuLZ8a25E","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"OJtvyNHukfeEOHNz","changes":[{"key":"flags.midi-qol.disadvantage.ability.check.all","mode":0,"value":"1","priority":20},{"key":"flags.midi-qol.disadvantage.attack.all","mode":0,"value":"1","priority":20},{"key":"flags.midi-qol.fail.ability.save.all","mode":0,"value":"1","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/magic/nature/root-vine-thorned-fire-purple.webp","system":{"description":{"value":"<p><em><strong></strong></em> While in sunlight, the shadow has disadvantage on attack rolls, ability checks, and saving throws.</p>","chat":"","unidentified":""},"source":"Basic Rules pg 344","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677032788723,"modifiedTime":1677032886436,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"lemhgAbpuLZ8a25E"}
{"name":"Martial Advantage","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Martial Advantage.</strong></em>","fullName":"Martial Advantage."},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.6dUC0Q6USA0HmFZt.Item.yogkbhyzy4z3abdj"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.6dUC0Q6USA0HmFZt.Item.yogkbhyzy4z3abdj","hash":"1d9e2b33af677a96180693718bba0230e2cc922e"},"itemacro":{"macro":{"name":"Martial Advantage","type":"script","scope":"global","command":"const version = \"10.0.0\";\nconst optionName = \"Martial Advantage\";\nconst timeFlag = \"martialAdvantageTime\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\t\n\tif (args[0].macroPass === \"DamageBonus\") {\n\t\t// check the action type\n\t\tif (![\"mwak\", \"rwak\"].includes(lastArg.itemData.system.actionType)) {\n\t\t\tconsole.log(`${optionName}: is not an applicable action type`);\n\t\t\treturn;\n\t\t}\n\t\t\t\n\t\t// Check for availability i.e. once per actors turn\n\t\tif (!isAvailableThisTurn() || !game.combat) {\n\t\t\tconsole.log(`${optionName}: is not available for this damage`);\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tlet targetToken = canvas.tokens.get(args[0].hitTargets[0].id ?? args[0].hitTargers[0]._id);\n\t\tif (checkAllyNearTarget(actorToken, targetToken)) {\n\t\t\tconst combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n\t\t\tconst lastTime = actor.getFlag(\"midi-qol\", timeFlag);\n\t\t\tif (combatTime !== lastTime) {\n\t\t\t\tawait actor.setFlag(\"midi-qol\", timeFlag, combatTime)\n\t\t\t}\n\n\t\t\treturn {damageRoll: '2d6', flavor: `${optionName} Damage`};\n\t\t}\t\t\n\t}\n\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}\n\n// Check to make sure the actor hasn't already applied the damage this turn\nfunction isAvailableThisTurn() {\n\tif (game.combat) {\n\t\tconst combatTime = `${game.combat.id}-${game.combat.round + game.combat.turn /100}`;\n\t\tconst lastTime = actor.getFlag(\"midi-qol\", timeFlag);\n\t\tif (combatTime === lastTime) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\t\n\treturn false;\n}\n\n// Check if there is an enemy of the target adjacent to it\nfunction checkAllyNearTarget(actorToken, targetToken) {\n\tlet foundEnemy = false;\n\tlet nearbyEnemy = canvas.tokens.placeables.filter(t => {\n\t\tlet nearby = (t.actor &&\n\t\t\t t.actor?.id !== actorToken.actor._id && // not me\n\t\t\t t.id !== targetToken.id && // not the target\n\t\t\t t.actor?.system.attributes?.hp?.value > 0 && // not incapacitated\n\t\t\t t.document.disposition !== targetToken.document.disposition && // not an ally\n\t\t\t MidiQOL.getDistance(t, targetToken, false) <= 5 // close to the target\n\t\t );\n\t\tfoundEnemy = foundEnemy || (nearby && t.document.disposition === -targetToken.document.disposition);\n\t\treturn nearby;\n\t});\n\t\n\tfoundEnemy = nearbyEnemy.length > 0;\n\treturn foundEnemy;\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[{"label":"Martial Advantage","icon":"icons/skills/melee/hand-grip-hammer-spiked-blue.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.mqd1KwilLe8xxEGR","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"eHA3aknQGmNqh9E9","changes":[{"key":"flags.dnd5e.DamageBonusMacro","mode":0,"value":"ItemMacro.Martial Advantage","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/skills/melee/hand-grip-hammer-spiked-blue.webp","system":{"description":{"value":"<p><em><strong></strong></em> Once per turn, the hobgoblin can deal an extra 7 (2d6) damage to a creature it hits with a weapon attack if that creature is within 5 feet of an ally of the hobgoblin that isn't incapacitated.</p>","chat":"","unidentified":""},"source":"Basic Rules pg 140","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676957651982,"modifiedTime":1676992572266,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"mqd1KwilLe8xxEGR"}
{"name":"Summon Yochlol","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Summon Demon (1/Day).</strong>","fullName":"Summon Demon (1/Day)."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.JmyF9zSB8DY6oW5c.Item.c5qtmlumikdouyv5"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.JmyF9zSB8DY6oW5c.Item.c5qtmlumikdouyv5","hash":"4cbcff6120b038d95f2352d8d1008847c64d9804"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Yochlol","type":"script","scope":"global","command":"const version = \"10.0.0\";\nconst optionName = \"Summon Demon\";\nconst summonFlag = \"summon-demon\";\nconst summonId = \"qWBgPJinjzUn0DWK\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\n\tif (args[0].macroPass === \"preItemRoll\") {\n\t\t// roll failure chance\n\t\tlet chanceRoll = await new Roll(`1d100`).evaluate({ async: true });\n\t\tawait game.dice3d?.showForRoll(chanceRoll);\n\t\t\n\t\tif (chanceRoll.total > 50) {\n\t\t\tconst damageRoll = await new Roll(`1d10`).evaluate({ async: true });\n\t\t\tawait game.dice3d?.showForRoll(damageRoll);\n\t\t\tconst damageWorkflow = await new MidiQOL.DamageOnlyWorkflow(actor, actorToken, damageRoll.total, \"psychic\", [actorToken], damageRoll, \n\t\t\t{ flavor: `${optionName} failure damage`, itemData: lastArg.itemData, itemCardId: \"new\" });\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\telse if (args[0] === \"on\") {\n        if (!game.modules.get(\"warpgate\")?.active) ui.notifications.error(\"Please enable the Warp Gate module\");\n\t\t\n\t\tconst sourceItem = await fromUuid(lastArg.origin);\n\n\t\t// build the update data to match summoned traits\n\t\tconst summonName = `Yochlol (${actor.name})`;\n\t\tlet updates = {\n\t\t\ttoken: {\n\t\t\t\t\"name\": summonName,\n\t\t\t\t\"disposition\": actorToken.disposition,\n\t\t\t\t\"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER,\n\t\t\t\t\"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS,\n\t\t\t\t\"bar1\": { attribute: \"attributes.hp\" },\n\t\t\t\t\"actorLink\": false,\n\t\t\t\t\"flags\": { \"midi-srd\": { \"Summoned Demon\" : { \"ActorId\": actor.id } } }\n\t\t\t},\n\t\t\t\"name\": summonName\n\t\t};\n\t\t\n\t\tlet summonActor = game.actors.getName(summonName);\n\t\tif (!summonActor) {\n\t\t\t// Get from the compendium\n\t\t\tlet entity = await fromUuid(\"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.\" + summonId);\n\t\t\tif (!entity) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to find the actor`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// import the actor\n\t\t\tlet document = await entity.collection.importFromCompendium(game.packs.get(entity.pack), summonId, updates);\n\t\t\tif (!document) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to import from the compendium`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tawait warpgate.wait(500);\n\t\t\tsummonActor = game.actors.getName(summonName);\n\t\t}\n\t\t\n\t\t// Spawn the result\n\t\tconst maxRange = 60;\n\t\tlet position = await HomebrewMacros.warpgateCrosshairs(actorToken, maxRange, sourceItem, summonActor.prototypeToken);\n\t\tif (position) {\n\t\t\t// check for token collision\n\t\t\tconst newCenter = canvas.grid.getSnappedPosition(position.x - summonActor.prototypeToken.width / 2, position.y - summonActor.prototypeToken.height / 2, 1);\n\t\t\tif (HomebrewMacros.checkPosition(newCenter.x, newCenter.y)) {\n\t\t\t\tui.notifications.error(`${optionName} - can't teleport on top of another token`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst result = await warpgate.spawnAt(position, summonName, updates, { controllingActor: actor }, {});\n\t\t\tif (!result || !result[0]) {\n\t\t\t\tui.notifications.error(`${optionName} - Unable to spawn`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet summonedToken = canvas.tokens.get(result[0]);\n\t\t\tif (summonedToken) {\n\t\t\t\tawait anime(actorToken, summonedToken);\n\t\t\t\tawait actor.setFlag(\"midi-qol\", summonFlag, summonedToken.id);\n\t\t\t\tawait summonedToken.toggleCombat();\n\t\t\t\tawait summonedToken.actor.rollInitiative();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\tui.notifications.error(`${optionName} - invalid summon location`);\n\t\t\treturn false;\n\t\t}\n\t}\n\telse if (args[0] === \"off\") {\n\t\t// delete the summon\n\t\tconst lastSummon = actor.getFlag(\"midi-qol\", summonFlag);\n\t\tif (lastSummon) {\n\t\t\tawait actor.unsetFlag(\"midi-qol\", summonFlag);\n\t\t\tawait warpgate.dismiss(lastSummon, game.canvas.scene.id);\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}\n\nasync function anime(token, target) {\n    new Sequence()\n        .effect()\n        .file(\"jb2a.misty_step.01.red\")       \n        .atLocation(target)\n\t\t.scaleToObject(1)\n\t\t.play();\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[{"label":"Summon Yochlol","icon":"icons/magic/fire/explosion-embers-evade-silhouette.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.pPpqdeXZkv98hFnE","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"ziCo0WQ3EDVhX8aL","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/magic/fire/explosion-embers-evade-silhouette.webp","system":{"description":{"value":"<p>The drow attempts to magically summon a @UUID[Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.qWBgPJinjzUn0DWK]{Yochlol}, with a 50 percent chance of success. If the attempt fails, the drow takes 5 (1d10) psychic damage. Otherwise, the summoned demon appears in an unoccupied space within 60 feet of its summoner, acts as an ally of its summoner, and can’t summon other demons. It remains for 10 minutes, until it or its summoner dies, or until its summoner dismisses it as an action.</p>","chat":"","unidentified":""},"source":"Mordenkainen Presents: Monsters of the Multiverse pg 102","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"10","units":"minute"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"day","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1676562833560,"modifiedTime":1677524646462,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"pPpqdeXZkv98hFnE"}
{"name":"Devil's Glaive","type":"weapon","img":"icons/weapons/polearms/glaive-simple.webp","effects":[{"_id":"JL0UfgqJsGSpflvT","flags":{"dae":{"stackable":"count","specialDuration":[],"macroRepeat":"none","transfer":false,"selfTarget":false,"selfTargetAlways":false,"durationExpression":""},"ActiveAuras":{"isAura":false,"inactive":false,"hidden":false,"height":false,"aura":"None","radius":"null","ignoreSelf":false,"alignment":"","type":"","hostile":false,"onlyOnce":false,"displayTemp":false},"dnd5e-helpers":{"rest-effect":"Ignore"},"core":{"statusId":""}},"changes":[{"key":"flags.midi-qol.OverTime","mode":5,"value":"turn=start,\ndamageRoll=1d10,\ntype=slashing,\nsaveDC=12,\nsaveAbility=con,\nlabel=Infernal Wound","priority":20}],"disabled":false,"duration":{"startTime":null,"rounds":99,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/weapons/polearms/halberd-crescent-glowing.webp","label":"Infernal Wound","origin":"Actor.A4wkHpF2qMwjyP1D.Item.tfAshukITeyA5QKb","tint":null,"transfer":false}],"flags":{"midi-qol":{"onUseMacroName":"","criticalThreshold":"20","effectActivation":false,"fumbleThreshold":null},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"dae":{"activeEquipped":false,"alwaysActive":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Devil's Glaive MQ0.8.51","type":"script","author":"devnIbfBHb74U9Zv","img":"icons/svg/dice-target.svg","scope":"global","command":"const version = \"0.9.52\";\ntry {\n    const lastArg = args[args.length-1];\n    if (args[0] === \"on\") {\n      let target = canvas.tokens.get(args[3]);\n      let flag = DAE.getFlag(target, \"infernal-wounds\") || {hookId: 0, woundCount: 0};\n    console.error(\"fetching flag \", target.id, flag);\n      flag.woundCount = flag.woundCount + 1;\n      if (!flag.hookId) {\n        console.error(\"hookId not set\");\n        flag.hookId = Hooks.on(\"deleteActiveEffect\", (actor, effectId) => {\n          console.error(\"Resetting wound count\");\n          if (effectId === lastArg.effectId)\n            DAE.unsetFlag(tactor, \"infernal-wounds\");\n        })\n      }\n      DAE.setFlag(target, \"infernal-wounds\", flag);\n    \n    } else if (args[0] === \"each\") {\n      let tactor;\n      let ttoken = canvas.tokens.get(lastArg.tokenId);\n      if (ttoken) tactor = ttoken.actor;\n      else tactor = game.actors.get(lastArg.actorId);\n      let damageItem = Item.createOwned(game.items.getName(\"Infernal Wound\"), tactor);\n      let saveTargets = game.user.targets;\n      game.user.targets = new Set([ttoken]);\n      let hookId = Hooks.once(\"midi-qol.RollComplete\", (workflow) => {\n        if (workflow.saves.has(ttoken)) {\n          tactor.deleteEmbeddedEntity(\"ActiveEffect\", lastArg.efData._id);\n        }\n      })\n     try {\n      damageItem.roll();\n      let flag = DAE.getFlag(ttoken, \"infernal-wounds\") || {hookId: 0, woundCount: 1};\n      } finally {\n       game.user.targets = saveTargets;\n      }\n    } else if (args[0] === \"off\") {\n    // do any clean up\n    }\n} catch (err)  {\n    console.error(`${args[0].itemData.name} - Devil's Glaive ${version}`, err);\n}","folder":null,"sort":0,"permission":{"default":0},"flags":{}},"name":"Devil's Glaive","type":"script","img":"icons/svg/dice-target.svg","scope":"global","command":"/*\n\tMelee Weapon Attack: +5 to hit, reach 10 ft., one target. Hit: 8 (1d10 + 3) slashing damage. If the target is a creature other than an undead or a construct, it must succeed on a DC 12 Constitution saving throw or lose 5 (1d10) hit points at the start of each of its turns due to an infernal wound. Each time the devil hits the wounded target with this attack, the damage dealt by the wound increases by 5 (1d10). Any creature can take an action to stanch the wound with a successful DC 12 Wisdom (Medicine) check. The wound also closes if the target receives magical healing.\n */\nconst optionName = \"Devil's Glaive\";\nconst version = \"10.0.11\";\n\ntry {\n    const lastArg = args[args.length - 1];\n\n    if (args[0] === \"on\") {\n        let target = canvas.tokens.get(args[3]);\n        let flag = DAE.getFlag(target, \"infernal-wounds\") || {\n            hookId: 0,\n            woundCount: 0,\n\t\t\teffectId: lastArg.efData._id\n        };\n        console.error(\"fetching flag \", target.id, flag);\n        flag.woundCount = flag.woundCount + 1;\n        if (!flag.hookId) {\n            console.error(\"hookId not set\");\n            flag.hookId = Hooks.on(\"deleteActiveEffect\", (actor, effectId) => {\n                console.error(\"Resetting wound count\");\n                if (effectId === lastArg.effectId)\n                    DAE.unsetFlag(tactor, \"infernal-wounds\");\n            })\n        }\n        DAE.setFlag(target, \"infernal-wounds\", flag);\n\n    } else if (args[0] === \"each\") {\n        let tactor;\n        let ttoken = canvas.tokens.get(lastArg.tokenId);\n        if (ttoken)\n            tactor = ttoken.actor;\n        else\n            tactor = game.actors.get(lastArg.actorId);\n\t\t\n        let damageItem = Item.createOwned(game.items.getName(\"Infernal Wound\"), tactor);\n        let saveTargets = game.user.targets;\n        game.user.targets = new Set([ttoken]);\n        let hookId = Hooks.once(\"midi-qol.RollComplete\", (workflow) => {\n            if (workflow.saves.has(ttoken)) {\n                tactor.deleteEmbeddedEntity(\"ActiveEffect\", lastArg.efData._id);\n            }\n        });\n\t\t\n\t\ttry {\n\t\t\tdamageItem.roll();\n\t\t\tlet flag = DAE.getFlag(ttoken, \"infernal-wounds\") || {\n\t\t\t\thookId: 0,\n\t\t\t\twoundCount: 1,\n\t\t\t\teffectId: lastArg.efData._id\n\t\t\t};\n\t\t} finally {\n\t\t\tgame.user.targets = saveTargets;\n\t\t}\n\t\t\n    } else if (args[0] === \"off\") {\n    }\n\t\n} catch (err) {\n    console.error(`${optionName} : ${version}`, err);\n}","sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null},"author":"5vlmE3uiS7OIQTEf","_id":null,"folder":null}},"core":{"sourceId":"Item.0AgqaCUkEyZCbC5Y"},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false,"set1s":false,"set2s":false,"set3s":false},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"critRange":{"value":null},"critDamage":{"value":""},"quickDesc":{"value":false,"altValue":false},"quickAttack":{"value":true,"altValue":true},"quickSave":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false},"quickFlavor":{"value":true,"altValue":true},"quickCharges":{"value":{"quantity":false},"altValue":{"quantity":false}}},"cf":{"id":"temp_mxc6kjqa6kp","color":"#000000"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"autoFailFriendly":false,"autoSaveFriendly":false,"offHandWeapon":false,"ignoreTotalCover":false},"scene-packer":{"hash":"29af66c3ecbbe6e80f67b5b541245649f1e531b6","sourceId":"Item.s2mwjUhzKGt5VAjo"}},"system":{"description":{"value":"<p>Melee Weapon Attack: +5 to hit, reach 10 ft., one target. Hit: 8 (1d10 + 3) slashing damage. If the target is a creature other than an undead or a construct, it must succeed on a DC 12 Constitution saving throw or lose 5 (1d10) hit points at the start of each of its turns due to an infernal wound. Each time the devil hits the wounded target with this attack, the damage dealt by the wound increases by 5 (1d10). Any creature can take an action to stanch the wound with a successful DC 12 Wisdom (Medicine) check. The wound also closes if the target receives magical healing.</p>","chat":"If the target is a creature other than an undead or a construct, it must succeed on a DC 12 Constitution saving throw or lose 5 (1d10) hit points at the start of each of its turns due to an infernal wound. Each time the devil hits the wounded target with this attack, the damage dealt by the wound increases by 5 (1d10). Any creature can take an action to stanch the wound with a successful DC 12 Wisdom (","unidentified":"Glaive"},"source":"","quantity":1,"weight":0,"price":{"value":0,"denomination":"gp"},"attunement":0,"equipped":false,"rarity":"common","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"str","actionType":"mwak","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d10 + 3","slashing"]],"versatile":""},"formula":"","save":{"ability":"","dc":18,"scaling":"flat"},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"weaponType":"simpleM","baseItem":"","properties":{"amm":false,"fin":false,"fir":false,"hvy":false,"lgt":false,"rch":true,"rel":false,"spc":false,"thr":false,"two":false,"ver":false,"ada":false,"foc":false,"lod":false,"mgc":false,"ret":false,"sil":false},"proficient":false},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1661995926164,"modifiedTime":1677024886668,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"folder":null,"sort":0,"_id":"rHzVLH0l1Ftv5njP"}
{"name":"Devil's Sight","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Devil's Sight.</strong></em>","fullName":"Devil's Sight."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.pgrp2yAfxDROUfHF.Item.5vetlp0ysrkojrs5"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.pgrp2yAfxDROUfHF.Item.5vetlp0ysrkojrs5","hash":"b24e3ff3bbd023a2f5f64056b7e201db50632089"}},"effects":[{"label":"Devil's Sight","icon":"icons/magic/perception/eye-ringed-glow-angry-red.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.sWxrRy1tY1eyAdcG","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"6l6TtRYRqf8uIUnt","changes":[{"key":"ATL.detectionModes.seeAll.range","mode":2,"value":"120","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/magic/perception/eye-ringed-glow-angry-red.webp","system":{"description":{"value":"<p><em><strong></strong></em> Magical darkness doesn't impede the devil's darkvision.</p>","chat":"","unidentified":""},"source":"Basic Rules pg 274","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1677008814407,"modifiedTime":1677009008765,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"sWxrRy1tY1eyAdcG"}
{"name":"Summon Shadow Demon","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Summon Demon (1/Day).</strong>","fullName":"Summon Demon (1/Day)."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.JmyF9zSB8DY6oW5c.Item.c5qtmlumikdouyv5"},"scene-packer":{"sourceId":"Item.f5VRfZK9iVJ9E3mt","hash":"4eda94baff89ba78cc6cf2e22c561fe12165fbb2"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false,"onUseMacroName":"[preItemRoll]ItemMacro"},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"autoSaveFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Summon Shadow Demon","type":"script","scope":"global","command":"/*\n\tThe drow attempts to magically summon a shadow demon (see the Monster Manual) with a 50 percent chance of success. If the attempt fails, the drow takes 5 (1d10) psychic damage. Otherwise, the summoned demon appears in an unoccupied space within 60 feet of its summoner, acts as an ally of its summoner, and can’t summon other demons. It remains for 10 minutes, until it or its summoner dies, or until its summoner dismisses it as an action.\n*/\nconst version = \"10.0.0\";\nconst optionName = \"Summon Shadow Demon\";\nconst summonFlag = \"summon-shadow-demon\";\nconst summonId = \"zwz5Igr2JJYD3nwo\";\n\ntry {\n\tconst lastArg = args[args.length - 1];\n\tconst actor = MidiQOL.MQfromActorUuid(lastArg.actorUuid);\n\tconst actorToken = canvas.tokens.get(lastArg.tokenId);\n\n\tif (args[0].macroPass === \"preItemRoll\") {\n\t\t// roll failure chance\n\t\tlet chanceRoll = await new Roll(`1d100`).evaluate({ async: true });\n\t\tawait game.dice3d?.showForRoll(chanceRoll);\n\t\t\n\t\tif (chanceRoll.total > 50) {\n\t\t\tconst damageRoll = await new Roll(`1d10`).evaluate({ async: true });\n\t\t\tawait game.dice3d?.showForRoll(damageRoll);\n\t\t\tconst damageWorkflow = await new MidiQOL.DamageOnlyWorkflow(actor, actorToken, damageRoll.total, \"psychic\", [actorToken], damageRoll, \n\t\t\t{ flavor: `${optionName} failure damage`, itemData: lastArg.itemData, itemCardId: \"new\" });\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\telse if (args[0] === \"on\") {\n        if (!game.modules.get(\"warpgate\")?.active) ui.notifications.error(\"Please enable the Warp Gate module\");\n\t\t\n\t\tconst sourceItem = await fromUuid(lastArg.origin);\n\n\t\t// build the update data to match summoned traits\n\t\tconst summonName = `Shadow Demon (${actor.name})`;\n\t\tlet updates = {\n\t\t\ttoken: {\n\t\t\t\t\"name\": summonName,\n\t\t\t\t\"disposition\": actorToken.disposition,\n\t\t\t\t\"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER,\n\t\t\t\t\"displayBars\": CONST.TOKEN_DISPLAY_MODES.ALWAYS,\n\t\t\t\t\"bar1\": { attribute: \"attributes.hp\" },\n\t\t\t\t\"actorLink\": false,\n\t\t\t\t\"flags\": { \"midi-srd\": { \"Summoned Demon\" : { \"ActorId\": actor.id } } }\n\t\t\t},\n\t\t\t\"name\": summonName\n\t\t};\n\t\t\n\t\tlet summonActor = game.actors.getName(summonName);\n\t\tif (!summonActor) {\n\t\t\t// Get from the compendium\n\t\t\tlet entity = await fromUuid(\"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.\" + summonId);\n\t\t\tif (!entity) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to find the actor`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// import the actor\n\t\t\tlet document = await entity.collection.importFromCompendium(game.packs.get(entity.pack), summonId, updates);\n\t\t\tif (!document) {\n\t\t\t\tui.notifications.error(`${optionName} - unable to import from the compendium`);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tawait warpgate.wait(500);\n\t\t\tsummonActor = game.actors.getName(summonName);\n\t\t}\n\t\t\n\t\t// Spawn the result\n\t\tconst maxRange = 60;\n\t\tlet position = await HomebrewMacros.warpgateCrosshairs(actorToken, maxRange, sourceItem, summonActor.prototypeToken);\n\t\tif (position) {\n\t\t\t// check for token collision\n\t\t\tconst newCenter = canvas.grid.getSnappedPosition(position.x - summonActor.prototypeToken.width / 2, position.y - summonActor.prototypeToken.height / 2, 1);\n\t\t\tif (HomebrewMacros.checkPosition(newCenter.x, newCenter.y)) {\n\t\t\t\tui.notifications.error(`${optionName} - can't teleport on top of another token`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst result = await warpgate.spawnAt(position, summonName, updates, { controllingActor: actor }, {});\n\t\t\tif (!result || !result[0]) {\n\t\t\t\tui.notifications.error(`${optionName} - Unable to spawn`);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet summonedToken = canvas.tokens.get(result[0]);\n\t\t\tif (summonedToken) {\n\t\t\t\tawait anime(actorToken, summonedToken);\n\t\t\t\tawait actor.setFlag(\"midi-qol\", summonFlag, summonedToken.id);\n\t\t\t\tawait summonedToken.toggleCombat();\n\t\t\t\tawait summonedToken.actor.rollInitiative();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\tui.notifications.error(`${optionName} - invalid summon location`);\n\t\t\treturn false;\n\t\t}\n\t}\n\telse if (args[0] === \"off\") {\n\t\t// delete the summon\n\t\tconst lastSummon = actor.getFlag(\"midi-qol\", summonFlag);\n\t\tif (lastSummon) {\n\t\t\tawait actor.unsetFlag(\"midi-qol\", summonFlag);\n\t\t\tawait warpgate.dismiss(lastSummon, game.canvas.scene.id);\n\t\t}\n\t}\n\t\n} catch (err) {\n    console.error(`${optionName}: ${version}`, err);\n}\n\nasync function anime(token, target) {\n    new Sequence()\n        .effect()\n        .file(\"jb2a.misty_step.01.red\")       \n        .atLocation(target)\n\t\t.scaleToObject(1)\n\t\t.play();\n}","author":"5vlmE3uiS7OIQTEf","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"effects":[{"label":"Summon Shadow Demon","icon":"icons/magic/fire/explosion-embers-evade-silhouette.webp","origin":"Item.f5VRfZK9iVJ9E3mt","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"PqvMhlra9ZBX9zxb","changes":[{"key":"macro.itemMacro","mode":0,"value":"","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":true,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["zeroHP"]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/magic/fire/explosion-embers-evade-silhouette.webp","system":{"description":{"value":"<p>The drow attempts to magically summon a @UUID[Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.zwz5Igr2JJYD3nwo]{Shadow Demon} with a 50 percent chance of success. If the attempt fails, the drow takes 5 (1d10) psychic damage. Otherwise, the summoned demon appears in an unoccupied space within 60 feet of its summoner, acts as an ally of its summoner, and can’t summon other demons. It remains for 10 minutes, until it or its summoner dies, or until its summoner dismisses it as an action.</p>","chat":"","unidentified":""},"source":"Mordenkainen Presents: Monsters of the Multiverse pg 102","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"10","units":"minute"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"day","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1676562833560,"modifiedTime":1676752545196,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"sfed3tywrwRAhfZN"}
{"name":"Battle Cry","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<strong>Battle Cry (1/Day).</strong>","fullName":"Battle Cry (1/Day)."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.8W8Q7sytF4ixL895.Item.kgxuuf0v8zs7owo9"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.8W8Q7sytF4ixL895.Item.kgxuuf0v8zs7owo9","hash":"52893cfdde09bbc435da3cc8a7a2d2bc883f044a"}},"effects":[{"label":"Battle Cry","icon":"icons/creatures/abilities/lion-roar-yellow.webp","origin":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creature-features.tEQZEoPVaCSmYxWg","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"RMcXgm7s7tv6ryDs","changes":[{"key":"flags.midi-qol.advantage.attack.all","mode":0,"value":"1","priority":20}],"tint":null,"transfer":false,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":["turnStartSource"]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/creatures/abilities/lion-roar-yellow.webp","system":{"description":{"value":"<p><em><strong></strong></em> Each creature of the fiendish orc’s choice that is within 30 feet of it, can hear it, and not already affected by Battle Cry gain advantage on attack rolls until the start of the fiendish orc's next turn. The fiendish orc can then make one attack as a bonus action.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":"","units":"inst"},"cover":null,"target":{"value":null,"width":null,"units":"","type":"ally"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"day","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"flat"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677113846142,"modifiedTime":1677114019396,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"tEQZEoPVaCSmYxWg"}
{"name":"Keen Sight and Smell","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Keen Sight and Smell.</strong></em>","fullName":"Keen Sight and Smell."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.oC2aCKSZXkMKMJWy.Item.j6rp4gqoirm2x997"},"scene-packer":{"hash":"9d6d948a37d056dfc70f421decf69cd30184e16b","sourceId":"Item.j0dEsDsMfcB31oIJ"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"effects":[{"label":"Keen Sight and Smell","icon":"icons/creatures/eyes/humanoid-single-purple-blue.webp","origin":"Item.j0dEsDsMfcB31oIJ","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"OpV7LKtcw1WgPh8N","changes":[{"key":"flags.midi-qol.advantage.skill.prc","mode":0,"value":"1","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"ActiveAuras":{"isAura":false,"aura":"None","radius":"undefined","alignment":"","type":"","ignoreSelf":false,"height":false,"hidden":false,"displayTemp":false,"hostile":false,"onlyOnce":false}}}],"img":"icons/creatures/eyes/humanoid-single-purple-blue.webp","system":{"description":{"value":"<p><em><strong></strong></em> The vulture has advantage on Wisdom (Perception) checks that rely on sight or smell.</p>","chat":"","unidentified":""},"source":"Basic Rules pg 157","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.4","coreVersion":"10.291","createdTime":1675364223503,"modifiedTime":1675364275385,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"uMlmPo8ZhQDFZqlO"}
{"name":"Aggressive","type":"feat","flags":{"ddbimporter":{"dndbeyond":{}},"monsterMunch":{"titleHTML":"<em><strong>Aggressive.</strong></em>","fullName":"Aggressive."},"core":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.8W8Q7sytF4ixL895.Item.stkgq6ux64syq889"},"scene-packer":{"sourceId":"Compendium.fvtt-trazzm-homebrew-5e.homebrew-creatures.8W8Q7sytF4ixL895.Item.stkgq6ux64syq889","hash":"e9498bb504fd1974e14f9aba29f901ae527a3bff"}},"effects":[],"img":"icons/creatures/fish/fish-fangtooth-skeletal-pink.webp","system":{"description":{"value":"<p><em><strong></strong></em> As a bonus action, the orc can move up to its speed toward a hostile creature that it can see.</p>","chat":"","unidentified":""},"source":"Critical Role: Call of the Netherdeep pg 71","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":"","units":""},"cover":null,"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":"","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"type":{"value":"monster","subtype":""},"requirements":"","recharge":{"value":null,"charged":false}},"ownership":{"default":0,"5vlmE3uiS7OIQTEf":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677114045349,"modifiedTime":1677114057273,"lastModifiedBy":"5vlmE3uiS7OIQTEf"},"folder":null,"sort":0,"_id":"ztwffJaopb8DOk2X"}
